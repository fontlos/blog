---
feature: true
title: Neovim åŸºæœ¬é…ç½®
date: 2022-01-18 00:02:09
abstracts:
tags:
    - Neovim
    - Lua
categories:
    - Share
cover: https://fontlos.com/icons/logo.png
---

# ä»‹ç»

**[Neovim](https://neovim.io/)** æ˜¯ Vim çš„é‡æ„ç‰ˆæœ¬, æ˜¯ Vim åœ¨è¿™ä¸ªæ—¶ä»£çš„é‡ç”Ÿ, å…¶å®Œç¾ç»§æ‰¿äº† Vim çš„æ“ä½œæ–¹å¼, é›†æˆäº† Lua å¼•æ“, èƒ½å¤Ÿä½¿ç”¨ Lua ä»¥åŠå„ç§è„šæœ¬æ¥ç¼–å†™æ’ä»¶, å¹¶ä¸ºæ‰©å±•ç¼–è¾‘å™¨æä¾›æ›´å¤§çš„çµæ´»æ€§. åœ¨ Neovim 0.5 ç‰ˆæœ¬ä¸­å¼•å…¥äº†è¯­è¨€æœåŠ¡å™¨åè®® (LSP),è¿™æ„å‘³ç€ Neovim å¯ä»¥å……å½“ LSP æœåŠ¡å™¨ (å¦‚ rust-analyzer)çš„å®¢æˆ·ç«¯, å¹¶ååŠ©æ„å»ºå¢å¼ºçš„ LSP å·¥å…·

# å®‰è£…

å®˜æ–¹ä¸»è¦æä¾›äº†ä¸¤ç§å®‰è£…æ–¹æ³•, é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…å’Œæ‰‹åŠ¨å®‰è£…, åŒ…ç®¡ç†å™¨åªéœ€ä¸€è¡Œå‘½ä»¤, è¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹æ‰‹åŠ¨å®‰è£…

é¦–å…ˆåˆ° [Releases Â· neovim/neovim (github.com)](https://github.com/neovim/neovim/releases) ä¸‹è½½æ‰“åŒ…å¥½çš„æ–‡ä»¶, å¯ä»¥å°†å…¶è§£å‹åœ¨ä»»æ„æ–‡ä»¶å¤¹, å°†å…¶ä¸­çš„binæ–‡ä»¶å¤¹æ·»åŠ åˆ°ç¯å¢ƒå˜é‡, ç„¶åè¿›å…¥ç»ˆç«¯, è¾“å…¥:

```sh
nvim -version
```

è¿™å°†è¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹:

```
NVIM v0.7.0-dev+905-gfcf5dd34f
Build type: RelWithDebInfo
LuaJIT 2.1.0-beta3
Compiled by runneradmin@fv-az152-721

Features: -acl +iconv +tui
See ":help feature-compile"

   system vimrc file: "$VIM\sysinit.vim"
  fall-back for $VIM: "C:/Program Files/nvim/share/nvim"

Run :checkhealth for more info
```

æ¥ä¸‹æ¥å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯è¾“å…¥ `nvim` ç›´æ¥åœ¨ç»ˆç«¯æ‰“å¼€ Neovim æˆ–è€…è¾“å…¥ `nvim-qt` æ‰“å¼€å¸¦æœ‰ GUI çš„ Neovim

# åˆæ­¥è®¾ç½®

## æœ€åŸºæœ¬çš„ä½¿ç”¨

ä¸ºäº†é˜²æ­¢åˆå­¦è€…å¯èƒ½ä¼šå‡ºç° **"æ— æ³•é€€å‡º"** Neovim çš„ç°è±¡, æˆ‘ä»¬å…ˆç†Ÿæ‚‰ä¸€ä¸‹ Neovim æœ€åŸºæœ¬çš„æ“ä½œ

- è¿›å…¥ Neovim æ—¶é»˜è®¤ä¸º **Normal** æ¨¡å¼, å¯ä»¥é€šè¿‡æŒ‰ä¸‹ `i` é”®è¿›å…¥ **Insert** ç¼–è¾‘æ¨¡å¼è¾“å…¥å†…å®¹
- å¯ä»¥åœ¨ä»»ä½•æ¨¡å¼ä¸‹æŒ‰ä¸‹ `Esc` é”®è¿›å…¥ Normal æ¨¡å¼
- è¾“å…¥ `:` è¿›å…¥ **Command** å‘½ä»¤æ¨¡å¼, æœ€åŸºæœ¬çš„å‘½ä»¤å¦‚ä¸‹
    - `:q` é€€å‡º nvim
    - `:w` ä¿å­˜
    - `:wq` ä¿å­˜å¹¶é€€å‡º
- æ¯æ¡å‘½ä»¤åéƒ½å¯ä»¥åŠ ä¸Š `!` æ¥ **å¼ºåˆ¶æ‰§è¡Œ**

æ‰§è¡Œ `:checkhealth` å¯ä»¥çœ‹åˆ°æ›´å¤šä¿¡æ¯

## æŒ‡å®šé…ç½®æ–‡ä»¶çš„ä½ç½®(å¯é€‰)

Windows ä¸‹ Neovim çš„é»˜è®¤é…ç½®æ–‡ä»¶ç›®å½•åœ¨ `C:\Users\Username\AppData\Local\nvim` (ç”¨äºä¿å­˜è‡ªå®šä¹‰é…ç½®) å’Œ `C:\Users\Username\AppData\Local\nvim-data` (ç”¨äºä¿å­˜æ’ä»¶ç­‰)

ä½†å¦‚æœæ°å¥½ç”¨äº† **éçº¯ ASCII å­—ç¬¦** çš„ç”¨æˆ·å, æˆªæ­¢åˆ°ç›®å‰, Neovim å¯èƒ½ä¼šæ— æ³•è¯†åˆ«, è¿™æ—¶ä½ å°±éœ€è¦æŒ‡å®šä»¥ä¸‹ç³»ç»Ÿå˜é‡

```
XDG_CONFIG_HOME
D:\XDG_HOME

XDG_DATA_HOME
D:\XDG_HOME
```

è¿™æ ·ä½ çš„é…ç½®æ–‡ä»¶å°±å¯ä»¥è¢«è½¬ç§»åˆ° `D:\XDG_HOME\nvim` å’Œ `D:\XDG_HOME\nvim-data`

# ä½¿ç”¨ Lua é…ç½® Neovim

Neovim çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯å¯ä»¥ä½¿ç”¨æ›´åŠ çµæ´»é«˜æ•ˆçš„ Lua, æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€‰æ‹© Lua ä½œä¸ºæˆ‘ä»¬çš„é…ç½®è¯­è¨€

åœ¨ nvim æ–‡ä»¶å¤¹ä¸‹æ–°å»º `init.lua` æ–‡ä»¶, æ—¢ç„¶éƒ½è¦ä½¿ç”¨ Neovimäº†, é‚£ä¹ˆå°±ç”¨ Neovim åœ¨é‡Œé¢å†™å…¥ä»¥ä¸‹å†…å®¹

```lua
-- å…³é—­ vim è‡ªå¸¦çš„æ–‡ä»¶ç®¡ç†
vim.g.loaded_netrw = 1
vim.g.loaded_netrwPlugin = 1

-- å°† Leader é”®æ˜ å°„ä¸ºç©ºæ ¼
vim.g.mapleader = ' '
vim.g.maplocalleader = ' '

-- å§‹ç»ˆæ˜¾ç¤ºåˆ†é¡µæ ‡ç­¾æ 
vim.o.showtabline = 2

-- è¿™æ˜¯ä¸€ç§åˆ†æ¨¡å—çš„ç¤ºä¾‹
-- æ ¸å¿ƒé…ç½®
require('core')
-- æ’ä»¶é…ç½®
require('config')
```

> Leader é”®å¯ä»¥ç”¨äºå¿«æ·é”®é‡æ˜ å°„, æ¯”å¦‚ç»è¿‡é…ç½®å, å¯ä»¥é”®å…¥ `<Leader> + <è®¾ç½®çš„é”®>` å¿«æ·å¯åŠ¨æŸåŠŸèƒ½

æ–°å»º `lua` æ–‡ä»¶å¤¹å¹¶åœ¨é‡Œé¢æ–°å»º `core` å’Œ `config` æ–‡ä»¶å¤¹, å¹¶åˆ†åˆ«æ–°å»º `init.lua`
```lua
-- ===============================================
-- core/init.lua
-- ===============================================
-- åŠ è½½æ’ä»¶
require('core.plugins-manager')
-- åŠ è½½ä¸€äº›åŸºæœ¬è®¾ç½®
require('core.base')

-- ===============================================
-- config/init.lua
-- ===============================================
require('config.ui')
require('config.color-scheme')
require('config.nvim-tree')
require('config.telescope')
require('config.lsp')
```

## æ’ä»¶ç®¡ç†å™¨

Vim çš„ æ’ä»¶ç®¡ç†å™¨å¾ˆå¥½, ä½†åŸºäº Lua çš„ [lazy.nvim](https://github.com/folke/lazy.nvim.git) æ›´å¼ºå¤§
```lua
-- ===============================================
-- core/plugins-manager.lua
-- ===============================================
-- æ’ä»¶ç®¡ç†
-- æ£€æµ‹lazy.nvimæ˜¯å¦å­˜åœ¨
local lazypath = vim.fn.stdpath("data") .. "/lazy/lazy.nvim"
if not vim.loop.fs_stat(lazypath) then
vim.fn.system({
    "git",
    "clone",
    "--filter=blob:none",
    "https://github.com/folke/lazy.nvim.git",
    "--branch=stable", -- latest stable release
    lazypath,
})
end

-- å°†lazypathè®¾ä¸ºè¿è¡Œæ—¶è·¯å¾„
vim.opt.rtp:prepend(lazypath)

-- åŠ è½½lazy.nvimæ¨¡å—
require("lazy").setup{
    -- è¿™å°†ä¼šç›´æ¥è‡ªåŠ¨åŠ è½½lua/core/pluginsä¸‹çš„æ‰€æœ‰æ–‡ä»¶
    spec = { import = "core.plugins" },
    git = {
        log = { "-8" },
        timeout = 120, -- æ€æ­»è¶…è¿‡ä¸¤åˆ†é’Ÿæ— ååº”çš„è¿›ç¨‹
        url_format = "https://githubfast.com/%s.git", -- å¯ç”¨ä»£ç†ä¸‹è½½
        filter = true,
    },
    ui = {
        icons = {
            cmd = "âŒ˜",
            config = "ğŸ› ",
            event = "ğŸ“…",
            ft = "ğŸ“‚",
            init = "âš™",
            keys = "ğŸ—",
            plugin = "ğŸ”Œ",
            runtime = "ğŸ’»",
            source = "ğŸ“„",
            start = "ğŸš€",
            task = "ğŸ“Œ",
            lazy = "ğŸ’¤ ",
        },
    },
}
```

ä¹‹åæ¯æ¬¡é…ç½®æ–°çš„æ’ä»¶, é‡å¯ Neovim å°±å¯ä»¥çœ‹åˆ°å®‰è£…é¢æ¿äº†

## ä¸€äº›åŸºæœ¬è®¾ç½®

```lua
-- ===============================================
-- core/base.lua
-- ===============================================
local set = vim.opt

set.tabstop = 4     -- tab=4ç©ºæ ¼
set.shiftwidth = 4
set.softtabstop = 4
set.expandtab = true    -- tabè½¬ç©ºæ ¼

set.number = true   -- ç»å¯¹è¡Œå·
set.rnu = true  -- ç›¸å¯¹è¡Œå·

set.scrolloff = 5   -- å‚ç›´æ»šåŠ¨æ—¶å…‰æ ‡è·åº•éƒ¨è¡Œæ•°
set.cursorline = true   -- é«˜äº®å…‰æ ‡æ‰€åœ¨è¡Œ

set.textwidth=1000   -- å…³é—­è‡ªåŠ¨æ¢è¡Œ
set.wrap = false
```

## LSP é…ç½®
ä¸ºäº†å†™ä»£ç æ—¶èƒ½æœ‰è¯­æ³•é«˜äº®å’Œä»£ç æç¤º, è¿™é‡Œæˆ‘ä»¬é€‰æ‹© `cmp-nvim-lsp` å¼•æ“
```lua
-- ===============================================
-- core/plugins/lsp.lua
-- ===============================================
-- LSP å¼•æ“
return {
    'hrsh7th/cmp-nvim-lsp',
    'hrsh7th/cmp-buffer',
    'hrsh7th/cmp-path',
    'hrsh7th/cmp-cmdline',
    'hrsh7th/nvim-cmp',
    -- snippet å¼•æ“
    'dcampos/nvim-snippy',
    'rafamadriz/friendly-snippets',
    -- lsp ç¾åŒ–
    'onsails/lspkind-nvim',
    -- lsp æ”¯æŒ
    "neovim/nvim-lspconfig",
    "williamboman/nvim-lsp-installer",
    -- è¯­æ³•é«˜äº®, æŠ˜å ä»£ç , ç¼©è¿›å¤„ç†
    {
        "nvim-treesitter/nvim-treesitter",
        build = ":TSUpdate",
    }
}

-- ===============================================
-- core/plugins/neodev.lua
-- ===============================================
-- ä»£ç è¡¥å…¨
return {
    "folke/neodev.nvim",
}

-- ===============================================
-- config/lsp.lua
-- ===============================================
local cmp = require('cmp')
local lspkind = require('lspkind')
cmp.setup{
    snippet = {
    expand = function(args)
        require('snippy').expand_snippet(args.body)
    end
    },
    sources = cmp.config.sources({
        { name = 'nvim_lsp' },
        { name = 'snippy' },
        { name = 'buffer' },
        { name = 'path' },
    }),
    -- å¿«æ·é”®
    mapping = {
        -- ä¸Šä¸€ä¸ª
        ['<C-k>'] = cmp.mapping.select_prev_item(),
        -- ä¸‹ä¸€ä¸ª
        ['<C-j>'] = cmp.mapping.select_next_item(),
        -- å‡ºç°è¡¥å…¨
        ['<A-.>'] = cmp.mapping(cmp.mapping.complete(), { 'i', 'c' }),
        -- å–æ¶ˆ
        ['<A-,>'] = cmp.mapping({
            i = cmp.mapping.abort(),
            c = cmp.mapping.close(),
        }),
        -- ç¡®è®¤
        ['<CR>'] = cmp.mapping.confirm({
            select = true ,
            behavior = cmp.ConfirmBehavior.Replace
        }),
        -- ['<C-y>'] = cmp.config.disable, -- Specify `cmp.config.disable` if you want to remove the default `<C-y>` mapping.
        ['<C-u>'] = cmp.mapping(cmp.mapping.scroll_docs(-4), { 'i', 'c' }),
        ['<C-d>'] = cmp.mapping(cmp.mapping.scroll_docs(4), { 'i', 'c' }),
    },
        -- ä½¿ç”¨lspkind-nvimæ˜¾ç¤ºç±»å‹å›¾æ ‡
    formatting = {
        format = lspkind.cmp_format({
        with_text = true, -- do not show text alongside icons
        maxwidth = 50, -- prevent the popup from showing more than provided characters (e.g 50 will not show more than 50 characters)
        before = function (entry, vim_item)
            -- Source æ˜¾ç¤ºæç¤ºæ¥æº
            vim_item.menu = "["..string.upper(entry.source.name).."]"
            return vim_item
        end
        })
    },
}

cmp.setup.cmdline('/', {
    sources = {
      { name = 'buffer' }
    }
})

cmp.setup.cmdline(':', {
    sources = cmp.config.sources({
      { name = 'path' }
    }, {
        { name = 'cmdline' }
      })
})


-- è®¾ç½®è¯­è¨€æœåŠ¡å™¨
local lspconfig = require('lspconfig')
lspconfig.rust_analyzer.setup {
    settings = {
      ['rust-analyzer'] = {},
    },
}


-- å…¨å±€å¿«æ·é”®
vim.keymap.set('n', '<space>e', vim.diagnostic.open_float)
vim.keymap.set('n', '[d', vim.diagnostic.goto_prev)
vim.keymap.set('n', ']d', vim.diagnostic.goto_next)
vim.keymap.set('n', '<space>q', vim.diagnostic.setloclist)

vim.api.nvim_create_autocmd('LspAttach', {
    group = vim.api.nvim_create_augroup('UserLspConfig', {}),
    callback = function(ev)
        vim.bo[ev.buf].omnifunc = 'v:lua.vim.lsp.omnifunc'

        local opts = { buffer = ev.buf }
        vim.keymap.set('n', 'gD', vim.lsp.buf.declaration, opts)
        vim.keymap.set('n', 'gd', vim.lsp.buf.definition, opts)
        vim.keymap.set('n', 'K', vim.lsp.buf.hover, opts)
        vim.keymap.set('n', 'gi', vim.lsp.buf.implementation, opts)
        vim.keymap.set('n', '<C-k>', vim.lsp.buf.signature_help, opts)
        vim.keymap.set('n', '<space>wa', vim.lsp.buf.add_workspace_folder, opts)
        vim.keymap.set('n', '<space>wr', vim.lsp.buf.remove_workspace_folder, opts)
        vim.keymap.set('n', '<space>wl', function()
            print(vim.inspect(vim.lsp.buf.list_workspace_folders()))
        end, opts)
        vim.keymap.set('n', '<space>D', vim.lsp.buf.type_definition, opts)
        vim.keymap.set('n', '<space>rn', vim.lsp.buf.rename, opts)
        vim.keymap.set({ 'n', 'v' }, '<space>ca', vim.lsp.buf.code_action, opts)
        vim.keymap.set('n', 'gr', vim.lsp.buf.references, opts)
        vim.keymap.set('n', '<space>f', function()
            vim.lsp.buf.format { async = true }
        end, opts)
    end,
})
```

## ä¸º Neovim æ·»åŠ ä¸€ä¸ªæ¼‚äº®çš„ TUI

```lua
-- ===============================================
-- core/plugins/ui.lua
-- ===============================================

-- éœ€è¦å®‰è£… Nerd å­—ä½“æ¥ä½¿ç”¨å›¾æ ‡
-- å›¾æ ‡åˆ° https://www.nerdfonts.com/cheat-sheet å¤åˆ¶
return {
	{-- é¦–é¡µ
        'goolord/alpha-nvim',
    	event = "VimEnter",
    	dependencies = {
            'nvim-tree/nvim-web-devicons'
        },
    },
    {-- é¡¶éƒ¨æ ‡ç­¾æ 
        'romgrk/barbar.nvim',
        dependencies = {
            'lewis6991/gitsigns.nvim', -- git çŠ¶æ€
            'nvim-tree/nvim-web-devicons', -- æ–‡ä»¶å›¾æ ‡
        },
        init = function()
            vim.g.barbar_auto_setup = false
        end,
        opts = {    -- lazy.nvimä¼šè‡ªåŠ¨åŠ è½½é…ç½®
            animation = true,
            -- insert_at_start = true,
        },
        version = '*',
    },
    {-- ä¾§è¾¹æ–‡ä»¶ç®¡ç†
        "nvim-tree/nvim-tree.lua",
        version = "*",
        dependencies = {
            "nvim-tree/nvim-web-devicons",
        },
        event = "VimEnter",
        config = function()
            require("nvim-tree").setup {}
        end,
    },
    {-- ä¾§è¾¹æ»šåŠ¨æ¡
        "petertriho/nvim-scrollbar",
        config = function()
        require("scrollbar").setup()
        end,
    },
    {-- å•æ–‡ä»¶å…¨æ–‡æŸ¥æ‰¾, ç›´æ¥è¾“å…¥/å†…å®¹, ç”¨:nohlæ¸…é™¤
        "kevinhwang91/nvim-hlslens",
        config = function()
        -- require('hlslens').setup() is not required
        require("scrollbar.handlers.search").setup()
        end,
    },
    {-- æ˜¾ç¤ºæ–‡ä»¶å¤§çº²
        'stevearc/aerial.nvim',
        config = function()
            require("aerial").setup()
	    end,
    },
    {-- åº•éƒ¨çŠ¶æ€æ 
        'nvim-lualine/lualine.nvim',
        config = function()
            require('lualine').setup()
        end,
    },
    -- ç¼©è¿›å¯¹é½çº¿
    "lukas-reineke/indent-blankline.nvim",
}
-- ===============================================
-- config/ui.lua
-- ===============================================
-- ä¸»é¡µé…ç½®
local alpha = require("alpha")
local dashboard = require("alpha.themes.dashboard")

-- è¿™é‡Œæ›¿æ¢æˆä½ è‡ªå·±çš„ ASCII Logo
dashboard.section.header.val = {
	[[                                                   ]],
	[[                                                   ]],
	[[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—]],
	[[â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•]],
	[[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—]],
	[[â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘]],
	[[â–ˆâ–ˆâ•‘     â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘]],
	[[â•šâ•â•      â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•â•   â•šâ•â•   â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•]],
	[[                                                   ]],
	[[						â•”â•â•—â•¦ â•¦ â•¦â•”â•â•—â•¦â•”â•â•—						]],
	[[						â•‘â•£ â•‘ â•šâ•¦â•â•šâ•â•—â•‘â• â•â•£						]],
	[[						â•šâ•â•â•©â•â•â•© â•šâ•â•â•©â•© â•©						]],
}

dashboard.section.buttons.val = {
	-- å›¾æ ‡åˆ° https://www.nerdfonts.com/cheat-sheet å¤åˆ¶
	dashboard.button("h", "ó±‹¡  > History", ":History<CR>"),
	dashboard.button("n", "î©¿  > New file", ":ene <BAR> startinsert <CR>"),
	dashboard.button("t", "ó°™…  > Open filetree", ":NvimTreeOpen<CR>"),
	dashboard.button("f", "ó°ˆ  > Find File", ":Telescope find_files<CR>"),
	dashboard.button("w", "î­¾  > Find word", ":Telescope live_grep<CR>"),
	dashboard.button("l", "ó±§•  > Lazy manager", ":Lazy<CR>"),
	dashboard.button("q", "ï¦  > Quit Nvim", ":qa<CR>"),
}

-- è‡ªå®šä¹‰é¡µè„šæ–‡å­—
dashboard.section.footer = {
	[[ Debug the World ]],
}

alpha.setup(dashboard.opts)

-- ç¼©è¿›çº¿é…ç½®
-- å½©è‰²ç¼©è¿›çº¿
vim.opt.termguicolors = true

vim.cmd [[highlight IndentBlanklineIndent1 guifg=#E06C75 gui=nocombine]]
vim.cmd [[highlight IndentBlanklineIndent2 guifg=#E5C07B gui=nocombine]]
vim.cmd [[highlight IndentBlanklineIndent3 guifg=#98C379 gui=nocombine]]
vim.cmd [[highlight IndentBlanklineIndent4 guifg=#56B6C2 gui=nocombine]]
vim.cmd [[highlight IndentBlanklineIndent5 guifg=#61AFEF gui=nocombine]]
vim.cmd [[highlight IndentBlanklineIndent6 guifg=#C678DD gui=nocombine]]

vim.opt.list = true
vim.opt.listchars:append "space:â‹…" -- ç”¨Â·å ç”¨ç©ºæ ¼ä½ç½®
vim.opt.listchars:append "eol:â†´" -- è¿½åŠ æ¢è¡Œæ ‡è¯†

require("indent_blankline").setup {
    -- ä¸Šä¸‹æ–‡é“¾æ¥å…³è”ç¼©è¿›çº¿
    show_current_context = true,
    show_current_context_start = true,
    show_end_of_line = true, -- ç¼©è¿›æœ«ç«¯æ˜¾ç¤ºç›´çº¿
    -- å½©è‰²ç¼©è¿›çº¿éƒ¨åˆ†
    space_char_blankline = " ",
    char_highlight_list = {
        "IndentBlanklineIndent1",
        "IndentBlanklineIndent2",
        "IndentBlanklineIndent3",
        "IndentBlanklineIndent4",
        "IndentBlanklineIndent5",
        "IndentBlanklineIndent6",
    },
}

-- ===============================================
-- config/color-scheme
-- ===============================================

-- é¢œè‰²ä¸»é¢˜
local M = {}

M.highlight = function(group, options)
    local guifg = options.fg or "NONE"
    local guibg = options.bg or "NONE"
    local guisp = options.sp or "NONE"
    local gui = options.gui or "NONE"
    local blend = options.blend or 0
    local ctermfg = options.ctermfg or "NONE"

    vim.cmd(
        string.format(
            "highlight %s guifg=%s ctermfg=%s guibg=%s guisp=%s gui=%s blend=%d",
            group,
            guifg,
            ctermfg,
            guibg,
            guisp,
            gui,
            blend
        )
    )
end

M.link = function(groupa, groupb)
    vim.cmd(string.format("highlight link %s %s", groupa, groupb))
end

M.colors = {
    red = "#E06C75",
    dark_red = "#BE5046",
    diff_red = "#2c1517",
    green = "#98C379",
    dark_green = "#59843b",
    dimm_green = "#41602b",
    diff_green = "#1e2718",
    yellow = "#E5C07B",
    diff_yellow = "#3e2e1e",
    dark_yellow = "#D19A66",
    blue = "#61AFEF",
    dimm_blue = "#0d4c7f",
    purple = "#C678DD",
    dimm_purple = "#633c6e",
    diff_purple = "#27182C",
    cyan = "#56B6C2",
    white = "#ABB2BF",
    black = "#1f1f1f",
    dimm_black = "#1c1c1c",
    dark_black = "#1a1a1a",
    comment_grey = "#5C6370",
    gutter_fg_grey = "#4B5263",
    cursor_grey = "#2C323C",
    dimm_cursor_grey = "#21262d",
    dark_cursor_grey = "#1d2228",
    visual_grey = "#3E4452",
    special_grey = "#3B4048",
    bracket_grey = "#7C828C",
}

M.setup = function()
    vim.g.colors_name = "onedark"
    -- vim.cmd [[highlight clear]]
    -- vim.cmd [[syntax reset]]

    M.highlight("Comment", { fg = M.colors.comment_grey, gui = "italic,bold" })
    M.highlight("Constant", { fg = M.colors.cyan })
    M.highlight("String", { fg = M.colors.green, gui = "italic" })
    M.highlight("Character", { fg = M.colors.green })
    M.highlight("Number", { fg = M.colors.dark_yellow })
    M.highlight("Boolean", { fg = M.colors.dark_yellow })
    M.highlight("Float", { fg = M.colors.dark_yellow })
    M.highlight("Identifier", { fg = M.colors.red })
    M.highlight("Function", { fg = M.colors.blue })
    M.highlight("Statement", { fg = M.colors.purple })
    M.highlight("Conditional", { fg = M.colors.purple })
    M.highlight("Repeat", { fg = M.colors.purple })
    M.highlight("Label", { fg = M.colors.purple })
    M.highlight("Operator", { fg = M.colors.purple })
    M.highlight("Keyword", { fg = M.colors.red })
    M.highlight("Exception", { fg = M.colors.purple })
    M.highlight("PreProc", { fg = M.colors.yellow })
    M.highlight("Include", { fg = M.colors.blue })
    M.highlight("Define", { fg = M.colors.purple })
    M.highlight("Macro", { fg = M.colors.purple })
    M.highlight("PreCondit", { fg = M.colors.yellow })
    M.highlight("Type", { fg = M.colors.yellow })
    M.highlight("StorageClass", { fg = M.colors.yellow })
    M.highlight("Structure", { fg = M.colors.yellow })
    M.highlight("Typedef", { fg = M.colors.yellow })
    M.highlight("Special", { fg = M.colors.blue })
    M.highlight("SpecialChar", {})
    M.highlight("Tag", {})
    M.highlight("Delimiter", {})
    M.highlight("SpecialComment", { fg = M.colors.comment_grey, gui = "italic" })
    M.highlight("Debug", {})
    M.highlight("Underlined", { gui = "underline" })
    M.highlight("Bold", { gui = "bold" })
    M.highlight("CursorWord0", { gui = "bold" })
    M.highlight("CursorWord1", { gui = "bold" })
    M.highlight("Ignore", {})
    M.highlight("Error", { fg = M.colors.dark_red })
    M.highlight("Todo", { fg = M.colors.purple })

    M.highlight("ColorColumn", {})
    M.highlight("VirtColumn", { fg = M.colors.dark_black })
    M.highlight("Conceal", { fg = M.colors.red })
    M.highlight("Cursor", { fg = M.colors.black, bg = M.colors.green })
    M.highlight("LspCodeLens", { fg = M.colors.bracket_grey })
    M.highlight("LspCodeLensSeparator", { fg = M.colors.bracket_grey })
    M.highlight("LspInlayHint", { fg = M.colors.visual_grey })
    M.highlight("LSPDeprecated", { fg = M.colors.comment_grey, gui = "strikethrough" })
    M.highlight("CursorIM", {})
    M.highlight("CursorColumn", { bg = M.colors.dark_black })
    M.highlight("CursorLine", { bg = M.colors.dark_black })
    M.highlight("Directory", { fg = M.colors.blue })
    M.highlight("DiffAdd", { bg = M.colors.diff_green })
    M.highlight("DiffChange", { bg = M.colors.diff_yellow })
    M.highlight("DiffDelete", { fg = M.colors.cursor_grey })
    M.highlight("DiffDeleteOld", { bg = M.colors.diff_red })
    M.highlight("DiffText", { bg = M.colors.diff_yellow })
    M.highlight("ErrorMsg", { fg = M.colors.red })
    M.highlight("VertSplit", { fg = M.colors.dark_black, bg = M.colors.dark_black })
    M.highlight("Folded", { fg = M.colors.comment_grey, bg = M.colors.dimm_black })
    M.highlight("FoldColumn", { fg = M.colors.yellow })
    M.highlight("SignColumn", {})
    M.highlight("IncSearch", { fg = M.colors.comment_grey, bg = M.colors.green })
    M.highlight("LineNr", { fg = M.colors.gutter_fg_grey })
    M.highlight("CursorLineNr", { fg = M.colors.green })
    M.highlight("MatchParen", { fg = M.colors.blue, gui = "underline" })
    M.highlight("ModeMsg", {})
    M.highlight("MoreMsg", {})
    M.highlight("NonText", { fg = M.colors.special_grey })
    M.highlight("Normal", { fg = M.colors.white })
    M.highlight("Pmenu", { bg = M.colors.dark_black, blend = 10 })
    M.highlight("PmenuSel", { fg = M.colors.black, bg = M.colors.green })
    M.highlight("PmenuSbar", { bg = M.colors.special_grey })
    M.highlight("PmenuThumb", { bg = M.colors.white })
    M.highlight("Question", { fg = M.colors.purple })
    M.highlight("Search", { fg = M.colors.black, bg = M.colors.comment_grey })
    M.highlight("ESearchMatch", { fg = M.colors.black, bg = M.colors.comment_grey })
    M.highlight("QuickFixLine", { gui = "bold" })
    M.highlight("SpecialKey", { fg = M.colors.special_grey })
    M.highlight("SpellBad", { gui = "undercurl", sp = M.colors.red })
    M.highlight("SpellCap", { gui = "undercurl", sp = M.colors.special_grey })
    M.highlight("SpellLocal", { gui = "undercurl", sp = M.colors.special_grey })
    M.highlight("SpellRare", { gui = "undercurl", sp = M.colors.special_grey })
    M.highlight("StatusLine", { fg = M.colors.white, bg = M.colors.dark_black })
    M.highlight("StatusLineNC", { fg = M.colors.comment_grey, bg = M.colors.dark_black })
    M.highlight("TabLine", { fg = M.colors.comment_grey })
    M.highlight("TabLineFill", {})
    M.highlight("TabLineSel", { fg = M.colors.white })
    M.highlight("Title", { fg = M.colors.green })
    M.highlight("Visual", { fg = M.colors.visual_black, bg = M.colors.visual_grey })
    M.highlight("VisualNOS", { bg = M.colors.visual_grey })
    M.highlight("WarningMsg", { fg = M.colors.yellow })
    M.highlight("WildMenu", { fg = M.colors.black, bg = M.colors.blue })
    M.highlight("WinNormalNC", { bg = M.colors.dark_black })
    M.highlight("HighlightedyankRegion", { bg = M.colors.comment_grey })

    --- Languages

    -- Markdown
    M.highlight("markdownCode", { fg = M.colors.yellow })
    M.highlight("markdownCodeBlockBGBorder", { bg = M.colors.dark_black })
    M.highlight("markdownCodeBlockBGBorderSign", { fg = M.colors.gutter_fg_grey })
    M.highlight("markdownCodeBlock", { fg = M.colors.yellow })
    M.highlight("markdownCodeDelimiter", { fg = M.colors.cursor_grey })
    M.highlight("markdownHeadingDelimiter", { fg = M.colors.gutter_fg_grey })
    M.highlight("markdownRule", { fg = M.colors.comment_grey })
    M.highlight("markdownHeadingRule", { fg = M.colors.comment_grey })
    M.highlight("markdownH1", { fg = M.colors.green, gui = "bold,italic" })
    M.highlight("markdownH2", { fg = M.colors.yellow, gui = "bold,italic" })
    M.highlight("markdownH3", { fg = M.colors.green, gui = "bold,italic" })
    M.highlight("markdownH4", { fg = M.colors.green, gui = "bold,italic" })
    M.highlight("markdownH5", { fg = M.colors.green, gui = "bold,italic" })
    M.highlight("markdownH6", { fg = M.colors.green, gui = "bold,italic" })
    M.highlight("markdownIdDelimiter", { fg = M.colors.purple })
    M.highlight("markdownId", { fg = M.colors.purple })
    M.highlight("markdownBlockquote", { fg = M.colors.comment_grey })
    M.highlight("markdownItalic", { gui = "italic" })
    M.highlight("markdownBold", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("markdownListMarker", { fg = M.colors.red })
    M.highlight("markdownOrderedListMarker", { fg = M.colors.red })
    M.highlight("markdownIdDeclaration", { fg = M.colors.blue })
    M.highlight("markdownLinkText", { fg = M.colors.blue })
    M.highlight("markdownLinkDelimiter", { fg = M.colors.white })
    M.highlight("markdownUrl", { fg = M.colors.purple })
    M.highlight("MDTSFencedCodeBlock", { fg = M.colors.red })
    M.highlight("MDTSFencedCodeBlockInfo", { fg = M.colors.dark_yellow })
    M.highlight("@text.reference", { fg = M.colors.blue })
    M.highlight("MDTSLinkText", { fg = M.colors.white })

    M.highlight("CodeBlock", { bg = M.colors.dimm_black })
    M.highlight("HeadlineGreen", { bg = M.colors.diff_green })
    M.highlight("HeadlineBlue", { bg = M.colors.dimm_cursor_grey })
    M.highlight("HeadlineRed", { bg = M.colors.diff_red })
    M.highlight("HeadlinePurple", { bg = M.colors.diff_purple })
    M.highlight("HeadlineYellow", { bg = M.colors.diff_yellow })
    M.highlight("@OrgTSHeadlineLevel1", { fg = M.colors.green, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel2", { fg = M.colors.blue, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel3", { fg = M.colors.red, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel4", { fg = M.colors.purple, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel5", { fg = M.colors.yellow, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel6", { fg = M.colors.green, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel7", { fg = M.colors.blue, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel8", { fg = M.colors.red, gui = "bold" })

    --- Treesitter
    -- Misc
    M.highlight("TSError", { fg = M.colors.red })
    M.highlight("TSPunctDelimiter", { fg = M.colors.bracket_grey })
    M.highlight("TSPunctBracket", { fg = M.colors.bracket_grey })
    M.highlight("TSPunctSpecial", { fg = M.colors.bracket_grey })

    -- -- Constants
    -- -- M.highlight("TSConstant", {})
    M.highlight("TSConstBuiltin", { fg = M.colors.dark_yellow, gui = "bold" })
    -- -- Not sure about this guy
    -- M.highlight("TSConstMacro", {})
    -- M.highlight("TSString", {})
    -- M.highlight("TSStringRegex", {})
    M.highlight("TSStringEscape", { fg = M.colors.yellow })
    -- M.highlight("TSCharacter", {})
    -- M.highlight("TSNumber", {})
    -- M.highlight("TSBoolean", {})
    -- M.highlight("TSFloat", {})
    -- M.highlight("TSAnnotation", {})
    -- M.highlight("TSAttribute", {})
    -- M.highlight("TSNamespace", {})

    -- -- Functions
    M.highlight("TSFuncBuiltin", { fg = M.colors.dark_yellow, gui = "bold" })
    -- M.highlight("TSFunction", {})
    -- M.highlight("TSFuncMacro", {})
    -- M.highlight("TSParameter", {})
    -- M.highlight("TSParameterReference", {})
    -- M.highlight("TSMethod", {})
    -- M.highlight("TSField", {})
    -- M.highlight("TSProperty", {})
    M.highlight("TSConstructor", { fg = M.colors.red, gui = "bold" })

    -- -- Keywords
    -- M.highlight("TSConditional", {})
    -- M.highlight("TSRepeat", {})
    -- M.highlight("TSLabel", {})
    -- M.highlight("TSKeyword", {})
    -- M.highlight("TSKeywordFunction", {})
    -- M.highlight("TSKeywordOperator", {})
    -- M.highlight("TSOperator", {})
    -- M.highlight("TSException", {})
    -- M.highlight("TSType", {})
    M.highlight("TSTypeBuiltin", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("TSTextReference", { fg = M.colors.blue, gui = "underline" })
    -- M.highlight("TSStructure", {})
    -- M.highlight("TSInclude", {})

    -- -- Variable
    -- M.highlight("TSVariable", {})
    M.highlight("TSVariableBuiltin", { fg = M.colors.dark_yellow, gui = "bold" })

    -- -- Text
    -- M.highlight("TSText", {})
    -- M.highlight("TSStrong", {})
    -- M.highlight("TSEmphasis", {})
    -- M.highlight("TSUnderline", {})
    -- M.highlight("TSTitle", {})
    -- M.highlight("TSLiteral", {})
    M.highlight("TSURI", { fg = M.colors.blue, gui = "underline" })

    -- -- Tags
    -- M.highlight("TSTag", {})
    -- M.highlight("TSTagDelimiter", {})

    --- Plugins
    M.highlight("illuminatedWord", { gui = "bold" })

    M.highlight("diffAdded", { fg = M.colors.green })
    M.highlight("diffRemoved", { fg = M.colors.red })
    M.highlight("gitcommitComment", { fg = M.colors.gutter_fg_grey, gui = "italic,bold" })
    M.highlight("gitcommitUnmerged", { fg = M.colors.green })
    M.highlight("gitcommitOnBranch", {})
    M.highlight("gitcommitBranch", { fg = M.colors.purple })
    M.highlight("gitcommitDiscardedType", { fg = M.colors.red })
    M.highlight("gitcommitSelectedType", { fg = M.colors.green })
    M.highlight("gitcommitHeader", {})
    M.highlight("gitcommitUntrackedFile", { fg = M.colors.cyan })
    M.highlight("gitcommitDiscardedFile", { fg = M.colors.red })
    M.highlight("gitcommitSelectedFile", { fg = M.colors.green })
    M.highlight("gitcommitUnmergedFile", { fg = M.colors.yellow })
    M.highlight("gitcommitFile", {})
    M.highlight("gitcommitSummary", { fg = M.colors.white })
    M.highlight("gitcommitOverflow", { fg = M.colors.red })

    M.highlight("GitHubUserName", { fg = M.colors.purple, gui = "italic" })
    M.highlight("GitHubDate", { fg = M.colors.yellow })
    M.highlight("GitHubCommentLength", { fg = M.colors.comment_grey, gui = "italic" })
    M.highlight("GitHubAuthorAssociation", { fg = M.colors.special_grey, gui = "italic,bold" })

    M.highlight("Defx_git_Untracked", { fg = M.colors.red })
    M.link("Defx_git_4_Untracked", "gitcommitUntrackedFile")
    M.link("Defx_git_4_Ignored", "gitcommitSummary")
    M.link("Defx_git_4_Unknown", "gitcommitSummary")
    M.link("Defx_git_4_Renamed", "gitcommitBranch")
    M.link("Defx_git_4_Modified", "gitcommitUnmergedFile")
    M.link("Defx_git_4_Unmerged", "diffRemoved")
    M.link("Defx_git_4_Deleted", "diffRemoved")
    M.link("Defx_git_4_Staged", "diffAdded")

    M.highlight("VimwikiHR", { fg = M.colors.yellow })
    M.highlight("VimwikiPre", { fg = M.colors.cursor_grey })
    M.highlight("VimwikiItalic", { gui = "italic" })
    M.highlight("OrgColorTagRed", { fg = M.colors.red })
    M.highlight("OrgColorTagCyan", { fg = M.colors.cyan })
    M.highlight("OrgColorTagGreen", { fg = M.colors.green })
    M.highlight("OrgColorTagBlue", { fg = M.colors.blue })
    M.highlight("OrgColorTagPurple", { fg = M.colors.purple })
    M.highlight("OrgColorTagYellow", { fg = M.colors.yellow })
    M.highlight("OrgColorTagOrange", { fg = M.colors.dark_yellow })
    M.highlight("VimwikiDate", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("VimwikiHeaderChar", { fg = M.colors.comment_grey })
    M.highlight("OrgQuote", { fg = M.colors.bracket_grey, gui = "italic" })

    M.highlight("Whitespace", { fg = M.colors.cursor_grey })

    M.link("gwitcommitNoBranch", "gitcommitBranch")
    M.link("gitcommitUntracked", "gitcommitComment")
    M.link("gitcommitDiscarded", "gitcommitComment")
    M.link("gitcommitSelected", "gitcommitComment")
    M.link("gitcommitDiscardedArrow", "gitcommitDiscardedFile")
    M.link("gitcommitSelectedArrow", "gitcommitSelectedFile")
    M.link("gitcommitUnmergedArrow", "gitcommitUnmergedFile")

    M.link("gitmessengerPopupNormal", "WinNormalNC")

    M.highlight("GitGutterAdd", { fg = M.colors.green })
    M.highlight("GitGutterChange", { fg = M.colors.dark_yellow })
    M.highlight("GitGutterDelete", { fg = M.colors.red })

    M.highlight("EchoDocFloat", { bg = M.colors.dark_black })

    M.highlight("DiagnosticError", { fg = M.colors.dark_red, gui = "bold" })
    M.highlight("DiagnosticWarn", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("DiagnosticInfo", { fg = M.colors.cyan, gui = "bold" })
    M.highlight("DiagnosticHint", { fg = M.colors.comment_grey, gui = "bold" })
    M.highlight("DiagnosticUnderlineError", { sp = M.colors.dark_red, gui = "undercurl" })
    M.highlight("DiagnosticUnderlineWarn", { sp = M.colors.dark_yellow, gui = "undercurl" })
    M.highlight("DiagnosticUnderlineInfo", { sp = M.colors.cyan, gui = "undercurl" })
    M.highlight("DiagnosticUnderlineHint", { sp = M.colors.comment_grey, gui = "undercurl" })
    M.highlight("FloatBorder", { fg = M.colors.comment_grey })
    M.highlight("FloatBorderDark", { fg = M.colors.comment_grey, bg = M.colors.dark_black })
    M.highlight("FloatShadow", { bg = M.colors.black, blend = 80 })
    M.highlight("FloatShadowThrough", { bg = M.colors.black, blend = 100 })

    M.highlight("TSDefinitionUsage", { gui = "bold" })
    M.highlight("TSDefinition", { gui = "bold" })

    M.highlight("IndentBlanklineContextChar", { fg = M.colors.visual_grey, gui = "nocombine" })
    M.highlight("IndentBlanklineContextStart", { sp = M.colors.visual_grey, gui = "underline" })
    M.highlight("IndentBlanklineContextSpaceChar", { gui = "nocombine" })

    M.highlight("RenamePrompt", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("DiagnosticSource", { fg = M.colors.cursor_grey, gui = "bold" })

    M.link("BqfPreviewRange", "DiffChange")

    M.link("Dash", "markdownBold")

    M.highlight("CmpItemAbbr", { fg = M.colors.white })
    M.highlight("CmpItemAbbrDeprecated", { fg = M.colors.comment_grey })
    M.highlight("CmpItemAbbrMatchFuzzy", { fg = M.colors.yellow })
    M.highlight("CmpItemMenu", { fg = M.colors.comment_grey })
    M.highlight("CmpItemKindMethod", { fg = M.colors.blue })
    M.highlight("CmpItemKindFunction", { fg = M.colors.blue })
    M.highlight("CmpItemKindVariable", { fg = M.colors.red })
    M.highlight("CmpItemKindConstant", { fg = M.colors.purple })
    M.highlight("CmpItemKindProperty", { fg = M.colors.red })
    M.highlight("CmpItemKindField", { fg = M.colors.red })
    M.highlight("CmpItemKindEnumMember", { fg = M.colors.cyan })
    M.highlight("CmpItemKindText", { fg = M.colors.yellow })
    M.highlight("CmpItemKindClass", { fg = M.colors.dark_yellow })
    M.highlight("CmpItemKindInterface", { fg = M.colors.dark_yellow })
    M.highlight("CmpItemKindStruct", { fg = M.colors.dark_yellow })
    M.highlight("CmpItemKindModule", { fg = M.colors.cyan })

    M.highlight("LightspeedUnlabeledMatch", { bg = M.colors.red, fg = M.colors.black, gui = "bold" })
    M.highlight("LightspeedLabel", { fg = M.colors.purple, gui = "bold" })
    M.highlight("LightspeedShortcut", { bg = M.colors.purple, fg = M.colors.black, gui = "bold" })

    M.highlight("org_hyperlink", { fg = M.colors.blue, gui = "underline" })
    M.highlight("org_verbatim", { fg = M.colors.bracket_grey, gui = "italic" })
    M.highlight("org_code", { fg = M.colors.yellow, bg = M.colors.dimm_black })
    M.highlight("OrgTSTable", { bg = M.colors.dark_cursor_grey })

    M.highlight("CodeBlock", { bg = M.colors.dimm_black })
    M.highlight("Quote", { fg = M.colors.dark_yellow })

    M.highlight("NotifyERRORBorder", { fg = M.colors.red })
    M.highlight("NotifyWARNBorder", { fg = M.colors.dark_yellow })
    M.highlight("NotifyINFOBorder", { fg = M.colors.green })
    M.highlight("NotifyDEBUGBorder", { fg = M.colors.comment_grey })
    M.highlight("NotifyTRACEBorder", { fg = M.colors.purple })
    M.highlight("NotifyERRORIcon", { fg = M.colors.red })
    M.highlight("NotifyWARNIcon", { fg = M.colors.dark_yellow })
    M.highlight("NotifyINFOIcon", { fg = M.colors.green })
    M.highlight("NotifyDEBUGIcon", { fg = M.colors.comment_grey })
    M.highlight("NotifyTRACEIcon", { fg = M.colors.purple })
    M.highlight("NotifyERRORTitle", { fg = M.colors.red })
    M.highlight("NotifyWARNTitle", { fg = M.colors.dark_yellow })
    M.highlight("NotifyINFOTitle", { fg = M.colors.green })
    M.highlight("NotifyDEBUGTitle", { fg = M.colors.comment_grey })
    M.highlight("NotifyTRACETitle", { fg = M.colors.purple })

    M.highlight("NavicSeparator", { fg = M.colors.comment_grey, bg = M.colors.dark_black })

    M.highlight("NavicIconsFunction", { fg = M.colors.green, bg = M.colors.dark_black })
    M.highlight("NavicIconsMethod", { fg = M.colors.green, bg = M.colors.dark_black })
    M.highlight("NavicIconsVariable", { fg = M.colors.blue, bg = M.colors.dark_black })
    M.highlight("NavicIconsConstant", { fg = M.colors.purple, bg = M.colors.dark_black })
    M.highlight("NavicIconsProperty", { fg = M.colors.blue, bg = M.colors.dark_black })
    M.highlight("NavicIconsStruct", { fg = M.colors.purple, bg = M.colors.dark_black })
    M.highlight("NavicIconsInterface", { fg = M.colors.cyan, bg = M.colors.dark_black })
    M.highlight("NavicIconsEnum", { fg = M.colors.yellow, bg = M.colors.dark_black })
    M.highlight("NavicIconsField", { fg = M.colors.yellow, bg = M.colors.dark_black })
    M.highlight("NavicIconsClass", { fg = M.colors.purple, bg = M.colors.dark_black })

    M.highlight("NavicText", { fg = M.colors.comment_grey, bg = M.colors.dark_black })

    M.highlight("CCovered", { fg = M.colors.dark_green })
    -- M.highlight("CUncovered", { fg = M.colors.red })

    M.highlight("DapUIScope", { fg = M.colors.blue })
    M.highlight("DapUIType", { fg = M.colors.yellow })
    M.highlight("DapUIVariable", { fg = M.colors.red })
    M.highlight("DapUIDecoration", { fg = M.colors.purple })
    M.highlight("DapUIModifiedValue", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("DapUIThread", { fg = M.colors.green })
    M.highlight("DapUIStoppedThread", { fg = M.colors.cyan })
    M.highlight("DapUISource", { fg = M.colors.green })
    M.highlight("DapUILineNumber", { fg = M.colors.dark_yellow })
    M.highlight("DapUIFloatBorder", { fg = M.colors.comment_grey })
    M.highlight("DapUIWatchesHeader", { fg = M.colors.cyan })
    M.highlight("DapUIWatchesEmpty", { fg = M.colors.red })
    M.highlight("DapUIWatchesValue", { fg = M.colors.green })
    M.highlight("DapUIWatchesError", { fg = M.colors.dark_red })
    M.highlight("DapUIWatchesFrame", { fg = M.colors.purple })
    M.highlight("DapUIBreakpointsPath", { fg = M.colors.green })
    M.highlight("DapUIBreakpointsInfo", { fg = M.colors.green })
    M.highlight("DapUIBreakpointsCurrentLine", { fg = M.colors.yellow })
    M.highlight("DapUIBreakpointsLine", { fg = M.colors.cyan })
    M.highlight("DapUIFrameName", { fg = M.colors.red })

    M.highlight("OctoEditable", { bg = M.colors.dimm_black })

    M.highlight("SjLabel", { fg = M.colors.black, bg = M.colors.purple, gui = "bold" })
    M.highlight("SjSearch", { fg = M.colors.green })

    M.highlight("PackageInfoUpToDateVersion", { fg = M.colors.cyan })
    M.highlight("PackageInfoOutdatedVersion", { fg = M.colors.dark_yellow })

    M.highlight("NeotestUnknown", { fg = M.colors.comment_grey })
    M.highlight("NeotestSkipped", { fg = M.colors.yellow })
    M.highlight("NeotestRunning", { fg = M.colors.purple })
    M.highlight("NeotestPassed", { fg = M.colors.green })
    M.highlight("NeotestFailed", { fg = M.colors.dark_red })
end

return M

-- ===============================================
-- config/nvim-tree.lua
-- ===============================================

-- ä¾§è¾¹æ–‡ä»¶æ ‘
vim.opt.termguicolors = true

require("nvim-tree").setup({
    sort_by = "case_sensitive",
    hijack_cursor = true,
    system_open = {
        cmd = "open",
    },
    view = {
        width = 30,
        number = true,
        adaptive_size = false,
    },
    renderer = {
        group_empty = true,
        -- å›¾æ ‡
        icons = {
            show = {
                git = true,
                file = true,
                folder = true,
                folder_arrow = true,
            },
            glyphs = {
                bookmark = " ",
                folder = {
                    arrow_closed = "âµ",
                    arrow_open = "â·",
                },
                git = {
                    unstaged = "âœ—",
                    staged = "âœ“",
                    unmerged = "âŒ¥",
                    renamed = "âœ",
                    untracked = "â˜…",
                    deleted = "âŠ–",
                    ignored = "â—Œ",
                },
            },
        },
        special_files = { "Cargo.toml", "Makefile", "README.md", "readme.md" },
    },
    filters = {
        dotfiles = true,
    },
})
```

## å‘½ä»¤è¡¥å…¨

```lua
-- ===============================================
-- core/plugins/which-key.lua
-- ===============================================
-- å¼¹å‡ºä¸€ä¸ªçª—å£, æ˜¾ç¤ºæ‰€æœ‰å¯èƒ½çš„ç»‘å®šçš„å¿«æ·é”®
return {
    {
        'folke/which-key.nvim',
        config = function()
            require('which-key').setup()
        end
    }
}
```

## å…¨å±€è®¾ç½®æ’ä»¶

```lua
-- ===============================================
-- core/plugins/neoconf.lua
-- ===============================================
return {
    {
        "folke/neoconf.nvim",
        cmd = "Neoconf"
    },
}
```

## å…¨å±€æœç´¢æ’ä»¶

éœ€è¦å…ˆå®‰è£… [ripgrep](https://githubfast.com/BurntSushi/ripgrep)
```lua
-- ===============================================
-- core/plugins/telescope.lua
-- ===============================================
return {
    {
        'nvim-telescope/telescope.nvim',
        tag = '0.1.1',
        dependencies = { 'nvim-lua/plenary.nvim' },
        config = function()
            require('telescope').setup {}
        end
    }
}

-- ===============================================
-- config/telescope.lua
-- ===============================================
require('telescope').setup {
    defaults = {
        layout_config = {
            center = {
                height = 0.6,
                preview_cutoff = 80,
                prompt_position = "top",
                width = 0.5
            },
        },
    },
    pickers = {
        find_files = {
            theme = "dropdown",
        }
    },
    extensions = {
        fzf = {
            fuzzy = true,                    -- false will only do exact matching
            override_generic_sorter = true,  -- override the generic sorter
            override_file_sorter = true,     -- override the file sorter
            case_mode = "smart_case",        -- or "ignore_case" or "respect_case"
        }
    }
}
```

## å…¶ä»–çš„ä¸€äº›å¯é€‰æ’ä»¶

```lua
-- ===============================================
-- core/plugins/effect.lua
-- ===============================================
-- æ˜¾ç¤ºå…‰æ ‡æ‰€åœ¨çš„è¡Œ
return {
    {
        'edluffy/specs.nvim',
        config = function()
            require('specs').setup{
                show_jumps  = true,
                min_jump = 30,
                popup = {
                    delay_ms = 0, -- delay before popup displays
                    inc_ms = 10, -- time increments used for fade/resize effects
                    blend = 10, -- starting blend, between 0-100 (fully transparent), see :h winblend
                    width = 10,
                    winhl = "PMenu",
                    fader = require('specs').sinus_fader,
                    resizer = require('specs').shrink_resizer
                },
                ignore_filetypes = {},
                ignore_buftypes = {
                    nofile = true,
                },
            }
        end,
    },
}
```

## é”®ç›˜é‡æ˜ å°„

ä¸ºäº†æ–¹ä¾¿æ“ä½œ, å¯ä»¥å°†ä¸€äº›å¸¸ç”¨å¿«æ·é”®è¿›è¡Œé‡æ˜ å°„

æ–°å»º `core/keymap.lua`, éšåå¯ä»¥é€‰æ‹©åœ¨ `core/base.lua` ä¸­åŠ è½½å®ƒ
```lua
-- é”®ç›˜æ˜ å°„
local map = vim.api.nvim_set_keymap
local opts = { noremap = true, silent = true }
-- map('æ¨¡å¼','æŒ‰é”®','æ˜ å°„ä¸ºXX',opt)
-- map('n/i/v','<leaderå·²è¢«initæ˜ å°„ä¸ºç©ºæ ¼>xx','<Cmd>xx<CR>',opts)

-- ä¸€äº›ä¹ æƒ¯æ€§æŒ‰é”®
-- i æ¨¡å¼ä¸‹å°† qq æ˜ å°„ä¸º esc é”®,é”®å…¥qç­‰å¾…åå¯å†æ¬¡è¾“å…¥q
map('i', 'qq', '<Esc>', opts)
-- å¿«é€Ÿä¸Šä¸‹è·³è½¬9è¡Œ
map('n', '<C-u>', '9k', opts)
map('n', '<C-d>', '9j', opts)

-- ä¾§è¾¹æ–‡ä»¶æ ‘
map('n', '<leader>t', ':NvimTreeToggle<CR>', opts)

-- åˆ†å±ç›¸å…³
map("n", "sv", ":vsp<CR>", opts) -- å‚ç›´åˆ†å±
map("n", "sh", ":sp<CR>", opts) -- æ°´å¹³åˆ†å±
map("n", "sc", "<C-w>c", opts) -- å…³é—­å½“å‰åˆ†å±
map("n", "so", "<C-w>o", opts) -- å…³é—­å…¶ä»–åˆ†å± close others

-- çª—å£è½¬è·³ç›¸å…³
map("n", "<A-h>", "<C-w>h", opts)
map("n", "<A-j>", "<C-w>j", opts)
map("n", "<A-k>", "<C-w>k", opts)
map("n", "<A-l>", "<C-w>l", opts)
-- ä¸€äº›ç±»ä¼¼Windowsä¹ æƒ¯çš„æŒ‰é”®
-- map('n', '<C-d>', '<dd>', opts)
-- map('n', '<C-c>', '<yy>', opts)
-- map('n', '<C-p>', '<p>', opts)

-- barbar bufferæ ‡ç­¾æ æŒ‰é”®
-- Move to previous/next
map('n', '<A-,>', '<Cmd>BufferPrevious<CR>', opts)
map('n', '<A-.>', '<Cmd>BufferNext<CR>', opts)
-- Re-order to previous/next
map('n', '<A-<>', '<Cmd>BufferMovePrevious<CR>', opts)
map('n', '<A->>', '<Cmd>BufferMoveNext<CR>', opts)
-- Goto buffer in position...
map('n', '<A-1>', '<Cmd>BufferGoto 1<CR>', opts)
map('n', '<A-2>', '<Cmd>BufferGoto 2<CR>', opts)
map('n', '<A-3>', '<Cmd>BufferGoto 3<CR>', opts)
map('n', '<A-4>', '<Cmd>BufferGoto 4<CR>', opts)
map('n', '<A-5>', '<Cmd>BufferGoto 5<CR>', opts)
map('n', '<A-6>', '<Cmd>BufferGoto 6<CR>', opts)
map('n', '<A-7>', '<Cmd>BufferGoto 7<CR>', opts)
map('n', '<A-8>', '<Cmd>BufferGoto 8<CR>', opts)
map('n', '<A-9>', '<Cmd>BufferGoto 9<CR>', opts)
map('n', '<A-0>', '<Cmd>BufferLast<CR>', opts)
-- Pin/unpin buffer
map('n', '<A-p>', '<Cmd>BufferPin<CR>', opts)
-- Close buffer
map('n', '<A-c>', '<Cmd>BufferClose<CR>', opts)
-- Wipeout buffer
--                 :BufferWipeout
-- Close commands
--                 :BufferCloseAllButCurrent
--                 :BufferCloseAllButPinned
--                 :BufferCloseAllButCurrentOrPinned
--                 :BufferCloseBuffersLeft
--                 :BufferCloseBuffersRight
-- Magic buffer-picking mode
map('n', '<C-p>', '<Cmd>BufferPick<CR>', opts)
-- æ ‡ç­¾è‡ªåŠ¨æ’åº
map('n', '<leader>bb', '<Cmd>BufferOrderByBufferNumber<CR>', opts)
map('n', '<leader>bd', '<Cmd>BufferOrderByDirectory<CR>', opts)
map('n', '<leader>bl', '<Cmd>BufferOrderByLanguage<CR>', opts)
map('n', '<leader>bw', '<Cmd>BufferOrderByWindowNumber<CR>', opts)

-- åˆ‡æ¢aerialå¤§çº²æ˜¯å¦æ˜¾ç¤º
map('n', '<leader>a', '<cmd>AerialToggle!<CR>', opts)

-- telescope
map('n', '<leader>ff', ':Telescope find_files<CR>', opts)
map('n', '<leader>fw', ':Telescope live_grep<CR>', opts)

-- specs.nvim å®šä½å…‰æ ‡
map('n', 'ss', ':lua require("specs").show_specs()<CR>', opts)
```