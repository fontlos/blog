---
feature: false
title: Neovim 基本配置
date: 2022-01-22 00:02:09
abstracts:
tags:
    - Neovim
    - Lua
categories:
    - Share
cover: https://fontlos.com/icons/logo.png
---
# 介绍
**[Neovim](https://neovim.io/)** 是Vim的重构版本, 是Vim在这个时代的重生, 其完美继承了Vim的操作方式, 集成了lua引擎, 能够使用 Lua 以及各种脚本来编写插件, 并为扩展编辑器提供更大的灵活性. 在 Neovim 0.5 版本中，开发者引入了语言服务器协议 (LSP),这意味着, Neovim 可以充当 LSP 服务器 (如 rust-analyzer)的客户端, 并协助构建增强的 LSP 工具

# 安装
官方主要提供了两种安装方法, 通过包管理器安装和手动安装, 包管理器只需一行命令, 这里我们介绍一下手动安装

首先到[Releases · neovim/neovim (github.com)](https://github.com/neovim/neovim/releases)下载打包好的文件，可以将其解压在任意文件夹，将其中的bin文件夹添加到环境变量，然后进入终端，输入
```sh
nvim -version
```
如果输出类似以下内容，则说明安装成功
```
NVIM v0.7.0-dev+905-gfcf5dd34f
Build type: RelWithDebInfo
LuaJIT 2.1.0-beta3
Compiled by runneradmin@fv-az152-721

Features: -acl +iconv +tui
See ":help feature-compile"

   system vimrc file: "$VIM\sysinit.vim"
  fall-back for $VIM: "C:/Program Files/nvim/share/nvim"

Run :checkhealth for more info
```
接下来可以通过在终端输入 `nvim` 直接在终端打开 Neovim 或者输入 `nvim-qt` 打开带有 GUI 的 Neovim

# 初步设置
## 最基本的使用
为了防止初学者可能会出现 *"无法退出"* Neovim 的现象, 我们先熟悉一下 Neovim 最基本的操作
- 进入 Neovim 时默认为 **Normal** 模式, 可以通过按下 `i` 键进入 **Insert** 编辑模式输入内容
- 可以在任何模式下按下 `Esc` 键进入 Normal 模式
- 输入 `:` 进入 **Command** 命令模式, 最基本的命令如下
    - `:q` 退出 nvim
    - `:w` 保存
    - `:wq` 保存并退出
- 每条命令后都可以加上 `!` 来 **强制执行**

执行 `:checkhealth` 可以看到更多信息

## 指定配置文件的位置(可选)
Windows 下 Neovim 的默认配置文件目录在 `C:\Users\Username\AppData\Local\nvim` (用于保存自定义配置) 和 `C:\Users\Username\AppData\Local\nvim-data` (用于保存插件等)

但如果恰好用了非纯英文+数字的用户名, 截止到目前, Neovim 可能会无法识别, 这时你就必须进行以下操作

在环境变量系统变量中加入以下内容
```
XDG_CONFIG_HOME
D:\XDG_HOME

XDG_DATA_HOME
D:\XDG_HOME
```
这样你的配置文件就可以被转移到 `D:\XDG_HOME\nvim` 和 `D:\XDG_HOME\nvim-data`

# 使用 Lua 配置 Neovim
Neovim 的一大特点就是可以使用更加灵活高效的 Lua, 所以这里我们选择 Lua 作为我们的配置语言

在 nvim 文件夹下新建 `init.lua` 文件, 既然都要使用 Neovim了, 那么就用 Neovim 在里面写入以下内容

```lua
-- 关闭 vim 自带的文件管理
vim.g.loaded_netrw = 1
vim.g.loaded_netrwPlugin = 1

-- 将 Leader 键映射为空格
vim.g.mapleader = ' '
vim.g.maplocalleader = ' '

-- 始终显示分页标签栏
vim.o.showtabline = 2

-- 这是一种分模块的示例
-- 核心配置
require('core')
-- 插件配置
require('config')
```

>Leader 键可以用于快捷键重映射, 比如经过配置后, 可以键入 <Leader> + <设置的键> 快捷启动某功能

新建 `lua` 文件夹并在里面新建 `core` 和 `config` 文件夹, 并分别新建 `init.lua`
```lua
-- ===============================================
-- core/init.lua
-- ===============================================
-- 加载插件
require('core.plugins-manager')
-- 加载一些基本设置
require('core.base')

-- ===============================================
-- config/init.lua
-- ===============================================
require('config.ui')
require('config.color-scheme')
require('config.nvim-tree')
require('config.telescope')
require('config.lsp')
```
## 插件管理器
Vim 的 插件管理器很好, 但基于 Lua 的 [lazy.nvim](https://github.com/folke/lazy.nvim.git) 更强大
```lua
-- ===============================================
-- core/plugins-manager.lua
-- ===============================================
-- 插件管理
-- 检测lazy.nvim是否存在
local lazypath = vim.fn.stdpath("data") .. "/lazy/lazy.nvim"
if not vim.loop.fs_stat(lazypath) then
vim.fn.system({
    "git",
    "clone",
    "--filter=blob:none",
    "https://github.com/folke/lazy.nvim.git",
    "--branch=stable", -- latest stable release
    lazypath,
})
end

-- 将lazypath设为运行时路径
vim.opt.rtp:prepend(lazypath)

-- 加载lazy.nvim模块
require("lazy").setup{
    -- 这将会直接自动加载lua/core/plugins下的所有文件
    spec = { import = "core.plugins" },
    git = {
        log = { "-8" },
        timeout = 120, -- 杀死超过两分钟无反应的进程
        url_format = "https://githubfast.com/%s.git", -- 启用代理下载
        filter = true,
    },
    ui = {
        icons = {
            cmd = "⌘",
            config = "🛠",
            event = "📅",
            ft = "📂",
            init = "⚙",
            keys = "🗝",
            plugin = "🔌",
            runtime = "💻",
            source = "📄",
            start = "🚀",
            task = "📌",
            lazy = "💤 ",
        },
    },
}
```

之后每次配置新的插件, 重启 Neovim 就可以看到安装面板了

## 一些基本设置
```lua
-- ===============================================
-- core/base.lua
-- ===============================================
local set = vim.opt

set.tabstop = 4     -- tab=4空格
set.shiftwidth = 4
set.softtabstop = 4
set.expandtab = true    -- tab转空格

set.number = true   -- 绝对行号
set.rnu = true  -- 相对行号

set.scrolloff = 5   -- 垂直滚动时光标距底部行数
set.cursorline = true   -- 高亮光标所在行

set.textwidth=1000   -- 关闭自动换行
set.wrap = false
```

## LSP 配置
为了写代码时能有语法高亮和代码提示, 这里我们选择 `cmp-nvim-lsp` 引擎
```lua
-- ===============================================
-- core/plugins/lsp.lua
-- ===============================================
-- LSP 引擎
return {
    'hrsh7th/cmp-nvim-lsp',
    'hrsh7th/cmp-buffer',
    'hrsh7th/cmp-path',
    'hrsh7th/cmp-cmdline',
    'hrsh7th/nvim-cmp',
    -- snippet 引擎
    'dcampos/nvim-snippy',
    'rafamadriz/friendly-snippets',
    -- lsp 美化
    'onsails/lspkind-nvim',
    -- lsp 支持
    "neovim/nvim-lspconfig",
    "williamboman/nvim-lsp-installer",
    -- 语法高亮，折叠代码，缩进处理
    {
        "nvim-treesitter/nvim-treesitter",
        build = ":TSUpdate",
    }
}

-- ===============================================
-- core/plugins/neodev.lua
-- ===============================================
-- 代码补全
return {
    "folke/neodev.nvim",
}

-- ===============================================
-- config/lsp.lua
-- ===============================================
local cmp = require('cmp')
local lspkind = require('lspkind')
cmp.setup{
    snippet = {
    expand = function(args)
        require('snippy').expand_snippet(args.body)
    end
    },
    sources = cmp.config.sources({
        { name = 'nvim_lsp' },
        { name = 'snippy' },
        { name = 'buffer' },
        { name = 'path' },
    }),
    -- 快捷键
    mapping = {
        -- 上一个
        ['<C-k>'] = cmp.mapping.select_prev_item(),
        -- 下一个
        ['<C-j>'] = cmp.mapping.select_next_item(),
        -- 出现补全
        ['<A-.>'] = cmp.mapping(cmp.mapping.complete(), { 'i', 'c' }),
        -- 取消
        ['<A-,>'] = cmp.mapping({
            i = cmp.mapping.abort(),
            c = cmp.mapping.close(),
        }),
        -- 确认
        ['<CR>'] = cmp.mapping.confirm({
            select = true ,
            behavior = cmp.ConfirmBehavior.Replace
        }),
        -- ['<C-y>'] = cmp.config.disable, -- Specify `cmp.config.disable` if you want to remove the default `<C-y>` mapping.
        ['<C-u>'] = cmp.mapping(cmp.mapping.scroll_docs(-4), { 'i', 'c' }),
        ['<C-d>'] = cmp.mapping(cmp.mapping.scroll_docs(4), { 'i', 'c' }),
    },
        -- 使用lspkind-nvim显示类型图标
    formatting = {
        format = lspkind.cmp_format({
        with_text = true, -- do not show text alongside icons
        maxwidth = 50, -- prevent the popup from showing more than provided characters (e.g 50 will not show more than 50 characters)
        before = function (entry, vim_item)
            -- Source 显示提示来源
            vim_item.menu = "["..string.upper(entry.source.name).."]"
            return vim_item
        end
        })
    },
}

cmp.setup.cmdline('/', {
    sources = {
      { name = 'buffer' }
    }
})

cmp.setup.cmdline(':', {
    sources = cmp.config.sources({
      { name = 'path' }
    }, {
        { name = 'cmdline' }
      })
})


-- 设置语言服务器
local lspconfig = require('lspconfig')
lspconfig.rust_analyzer.setup {
    settings = {
      ['rust-analyzer'] = {},
    },
}


-- 全局快捷键
vim.keymap.set('n', '<space>e', vim.diagnostic.open_float)
vim.keymap.set('n', '[d', vim.diagnostic.goto_prev)
vim.keymap.set('n', ']d', vim.diagnostic.goto_next)
vim.keymap.set('n', '<space>q', vim.diagnostic.setloclist)

vim.api.nvim_create_autocmd('LspAttach', {
    group = vim.api.nvim_create_augroup('UserLspConfig', {}),
    callback = function(ev)
        vim.bo[ev.buf].omnifunc = 'v:lua.vim.lsp.omnifunc'

        local opts = { buffer = ev.buf }
        vim.keymap.set('n', 'gD', vim.lsp.buf.declaration, opts)
        vim.keymap.set('n', 'gd', vim.lsp.buf.definition, opts)
        vim.keymap.set('n', 'K', vim.lsp.buf.hover, opts)
        vim.keymap.set('n', 'gi', vim.lsp.buf.implementation, opts)
        vim.keymap.set('n', '<C-k>', vim.lsp.buf.signature_help, opts)
        vim.keymap.set('n', '<space>wa', vim.lsp.buf.add_workspace_folder, opts)
        vim.keymap.set('n', '<space>wr', vim.lsp.buf.remove_workspace_folder, opts)
        vim.keymap.set('n', '<space>wl', function()
            print(vim.inspect(vim.lsp.buf.list_workspace_folders()))
        end, opts)
        vim.keymap.set('n', '<space>D', vim.lsp.buf.type_definition, opts)
        vim.keymap.set('n', '<space>rn', vim.lsp.buf.rename, opts)
        vim.keymap.set({ 'n', 'v' }, '<space>ca', vim.lsp.buf.code_action, opts)
        vim.keymap.set('n', 'gr', vim.lsp.buf.references, opts)
        vim.keymap.set('n', '<space>f', function()
            vim.lsp.buf.format { async = true }
        end, opts)
    end,
})
```

## 为 Neovim 添加一个漂亮的 TUI
```lua
-- ===============================================
-- core/plugins/ui.lua
-- ===============================================

-- 需要安装 Nerd 字体来使用图标
-- 图标到 https://www.nerdfonts.com/cheat-sheet 复制
return {
	{-- 首页
        'goolord/alpha-nvim',
    	event = "VimEnter",
    	dependencies = {
            'nvim-tree/nvim-web-devicons'
        },
    },
    {-- 顶部标签栏
        'romgrk/barbar.nvim',
        dependencies = {
            'lewis6991/gitsigns.nvim', -- git 状态
            'nvim-tree/nvim-web-devicons', -- 文件图标
        },
        init = function()
            vim.g.barbar_auto_setup = false
        end,
        opts = {    -- lazy.nvim会自动加载配置
            animation = true,
            -- insert_at_start = true,
        },
        version = '*',
    },
    {-- 侧边文件管理
        "nvim-tree/nvim-tree.lua",
        version = "*",
        dependencies = {
            "nvim-tree/nvim-web-devicons",
        },
        event = "VimEnter",
        config = function()
            require("nvim-tree").setup {}
        end,
    },
    {-- 侧边滚动条
        "petertriho/nvim-scrollbar",
        config = function()
        require("scrollbar").setup()
        end,
    },
    {-- 单文件全文查找，直接输入/内容，用:nohl清除
        "kevinhwang91/nvim-hlslens",
        config = function()
        -- require('hlslens').setup() is not required
        require("scrollbar.handlers.search").setup()
        end,
    },
    {-- 显示文件大纲
        'stevearc/aerial.nvim',
        config = function()
            require("aerial").setup()
	    end,
    },
    {-- 底部状态栏
        'nvim-lualine/lualine.nvim',
        config = function()
            require('lualine').setup()
        end,
    },
    -- 缩进对齐线
    "lukas-reineke/indent-blankline.nvim",
}
-- ===============================================
-- config/ui.lua
-- ===============================================
-- 主页配置
local alpha = require("alpha")
local dashboard = require("alpha.themes.dashboard")

-- 这里替换成你自己的 ASCII Logo
dashboard.section.header.val = {
	[[                                                   ]],
	[[                                                   ]],
	[[███████╗ ██████╗ ███╗   ██╗████████╗██╗      ██████╗ ███████╗]],
	[[██╔════╝██╔═══██╗████╗  ██║╚══██╔══╝██║     ██╔═══██╗██╔════╝]],
	[[█████╗  ██║   ██║██╔██╗ ██║   ██║   ██║     ██║   ██║███████╗]],
	[[██╔══╝  ██║   ██║██║╚██╗██║   ██║   ██║     ██║   ██║╚════██║]],
	[[██║     ╚██████╔╝██║ ╚████║   ██║   ███████╗╚██████╔╝███████║]],
	[[╚═╝      ╚═════╝ ╚═╝  ╚═══╝   ╚═╝   ╚══════╝ ╚═════╝ ╚══════╝]],
	[[                                                   ]],
	[[						╔═╗╦ ╦ ╦╔═╗╦╔═╗						]],
	[[						║╣ ║ ╚╦╝╚═╗║╠═╣						]],
	[[						╚═╝╩═╝╩ ╚═╝╩╩ ╩						]],
}

dashboard.section.buttons.val = {
	-- 图标到 https://www.nerdfonts.com/cheat-sheet 复制
	dashboard.button("h", "󱋡  > History", ":History<CR>"),
	dashboard.button("n", "  > New file", ":ene <BAR> startinsert <CR>"),
	dashboard.button("t", "󰙅  > Open filetree", ":NvimTreeOpen<CR>"),
	dashboard.button("f", "󰈞  > Find File", ":Telescope find_files<CR>"),
	dashboard.button("w", "  > Find word", ":Telescope live_grep<CR>"),
	dashboard.button("l", "󱧕  > Lazy manager", ":Lazy<CR>"),
	dashboard.button("q", "  > Quit Nvim", ":qa<CR>"),
}

-- 自定义页脚文字
dashboard.section.footer = {
	[[ Debug the World ]],
}

alpha.setup(dashboard.opts)

-- 缩进线配置
-- 彩色缩进线
vim.opt.termguicolors = true

vim.cmd [[highlight IndentBlanklineIndent1 guifg=#E06C75 gui=nocombine]]
vim.cmd [[highlight IndentBlanklineIndent2 guifg=#E5C07B gui=nocombine]]
vim.cmd [[highlight IndentBlanklineIndent3 guifg=#98C379 gui=nocombine]]
vim.cmd [[highlight IndentBlanklineIndent4 guifg=#56B6C2 gui=nocombine]]
vim.cmd [[highlight IndentBlanklineIndent5 guifg=#61AFEF gui=nocombine]]
vim.cmd [[highlight IndentBlanklineIndent6 guifg=#C678DD gui=nocombine]]

vim.opt.list = true
vim.opt.listchars:append "space:⋅" -- 用·占用空格位置
vim.opt.listchars:append "eol:↴" -- 追加换行标识

require("indent_blankline").setup {
    -- 上下文链接关联缩进线
    show_current_context = true,
    show_current_context_start = true,
    show_end_of_line = true, -- 缩进末端显示直线
    -- 彩色缩进线部分
    space_char_blankline = " ",
    char_highlight_list = {
        "IndentBlanklineIndent1",
        "IndentBlanklineIndent2",
        "IndentBlanklineIndent3",
        "IndentBlanklineIndent4",
        "IndentBlanklineIndent5",
        "IndentBlanklineIndent6",
    },
}

-- ===============================================
-- config/color-scheme
-- ===============================================

-- 颜色主题
local M = {}

M.highlight = function(group, options)
    local guifg = options.fg or "NONE"
    local guibg = options.bg or "NONE"
    local guisp = options.sp or "NONE"
    local gui = options.gui or "NONE"
    local blend = options.blend or 0
    local ctermfg = options.ctermfg or "NONE"

    vim.cmd(
        string.format(
            "highlight %s guifg=%s ctermfg=%s guibg=%s guisp=%s gui=%s blend=%d",
            group,
            guifg,
            ctermfg,
            guibg,
            guisp,
            gui,
            blend
        )
    )
end

M.link = function(groupa, groupb)
    vim.cmd(string.format("highlight link %s %s", groupa, groupb))
end

M.colors = {
    red = "#E06C75",
    dark_red = "#BE5046",
    diff_red = "#2c1517",
    green = "#98C379",
    dark_green = "#59843b",
    dimm_green = "#41602b",
    diff_green = "#1e2718",
    yellow = "#E5C07B",
    diff_yellow = "#3e2e1e",
    dark_yellow = "#D19A66",
    blue = "#61AFEF",
    dimm_blue = "#0d4c7f",
    purple = "#C678DD",
    dimm_purple = "#633c6e",
    diff_purple = "#27182C",
    cyan = "#56B6C2",
    white = "#ABB2BF",
    black = "#1f1f1f",
    dimm_black = "#1c1c1c",
    dark_black = "#1a1a1a",
    comment_grey = "#5C6370",
    gutter_fg_grey = "#4B5263",
    cursor_grey = "#2C323C",
    dimm_cursor_grey = "#21262d",
    dark_cursor_grey = "#1d2228",
    visual_grey = "#3E4452",
    special_grey = "#3B4048",
    bracket_grey = "#7C828C",
}

M.setup = function()
    vim.g.colors_name = "onedark"
    -- vim.cmd [[highlight clear]]
    -- vim.cmd [[syntax reset]]

    M.highlight("Comment", { fg = M.colors.comment_grey, gui = "italic,bold" })
    M.highlight("Constant", { fg = M.colors.cyan })
    M.highlight("String", { fg = M.colors.green, gui = "italic" })
    M.highlight("Character", { fg = M.colors.green })
    M.highlight("Number", { fg = M.colors.dark_yellow })
    M.highlight("Boolean", { fg = M.colors.dark_yellow })
    M.highlight("Float", { fg = M.colors.dark_yellow })
    M.highlight("Identifier", { fg = M.colors.red })
    M.highlight("Function", { fg = M.colors.blue })
    M.highlight("Statement", { fg = M.colors.purple })
    M.highlight("Conditional", { fg = M.colors.purple })
    M.highlight("Repeat", { fg = M.colors.purple })
    M.highlight("Label", { fg = M.colors.purple })
    M.highlight("Operator", { fg = M.colors.purple })
    M.highlight("Keyword", { fg = M.colors.red })
    M.highlight("Exception", { fg = M.colors.purple })
    M.highlight("PreProc", { fg = M.colors.yellow })
    M.highlight("Include", { fg = M.colors.blue })
    M.highlight("Define", { fg = M.colors.purple })
    M.highlight("Macro", { fg = M.colors.purple })
    M.highlight("PreCondit", { fg = M.colors.yellow })
    M.highlight("Type", { fg = M.colors.yellow })
    M.highlight("StorageClass", { fg = M.colors.yellow })
    M.highlight("Structure", { fg = M.colors.yellow })
    M.highlight("Typedef", { fg = M.colors.yellow })
    M.highlight("Special", { fg = M.colors.blue })
    M.highlight("SpecialChar", {})
    M.highlight("Tag", {})
    M.highlight("Delimiter", {})
    M.highlight("SpecialComment", { fg = M.colors.comment_grey, gui = "italic" })
    M.highlight("Debug", {})
    M.highlight("Underlined", { gui = "underline" })
    M.highlight("Bold", { gui = "bold" })
    M.highlight("CursorWord0", { gui = "bold" })
    M.highlight("CursorWord1", { gui = "bold" })
    M.highlight("Ignore", {})
    M.highlight("Error", { fg = M.colors.dark_red })
    M.highlight("Todo", { fg = M.colors.purple })

    M.highlight("ColorColumn", {})
    M.highlight("VirtColumn", { fg = M.colors.dark_black })
    M.highlight("Conceal", { fg = M.colors.red })
    M.highlight("Cursor", { fg = M.colors.black, bg = M.colors.green })
    M.highlight("LspCodeLens", { fg = M.colors.bracket_grey })
    M.highlight("LspCodeLensSeparator", { fg = M.colors.bracket_grey })
    M.highlight("LspInlayHint", { fg = M.colors.visual_grey })
    M.highlight("LSPDeprecated", { fg = M.colors.comment_grey, gui = "strikethrough" })
    M.highlight("CursorIM", {})
    M.highlight("CursorColumn", { bg = M.colors.dark_black })
    M.highlight("CursorLine", { bg = M.colors.dark_black })
    M.highlight("Directory", { fg = M.colors.blue })
    M.highlight("DiffAdd", { bg = M.colors.diff_green })
    M.highlight("DiffChange", { bg = M.colors.diff_yellow })
    M.highlight("DiffDelete", { fg = M.colors.cursor_grey })
    M.highlight("DiffDeleteOld", { bg = M.colors.diff_red })
    M.highlight("DiffText", { bg = M.colors.diff_yellow })
    M.highlight("ErrorMsg", { fg = M.colors.red })
    M.highlight("VertSplit", { fg = M.colors.dark_black, bg = M.colors.dark_black })
    M.highlight("Folded", { fg = M.colors.comment_grey, bg = M.colors.dimm_black })
    M.highlight("FoldColumn", { fg = M.colors.yellow })
    M.highlight("SignColumn", {})
    M.highlight("IncSearch", { fg = M.colors.comment_grey, bg = M.colors.green })
    M.highlight("LineNr", { fg = M.colors.gutter_fg_grey })
    M.highlight("CursorLineNr", { fg = M.colors.green })
    M.highlight("MatchParen", { fg = M.colors.blue, gui = "underline" })
    M.highlight("ModeMsg", {})
    M.highlight("MoreMsg", {})
    M.highlight("NonText", { fg = M.colors.special_grey })
    M.highlight("Normal", { fg = M.colors.white })
    M.highlight("Pmenu", { bg = M.colors.dark_black, blend = 10 })
    M.highlight("PmenuSel", { fg = M.colors.black, bg = M.colors.green })
    M.highlight("PmenuSbar", { bg = M.colors.special_grey })
    M.highlight("PmenuThumb", { bg = M.colors.white })
    M.highlight("Question", { fg = M.colors.purple })
    M.highlight("Search", { fg = M.colors.black, bg = M.colors.comment_grey })
    M.highlight("ESearchMatch", { fg = M.colors.black, bg = M.colors.comment_grey })
    M.highlight("QuickFixLine", { gui = "bold" })
    M.highlight("SpecialKey", { fg = M.colors.special_grey })
    M.highlight("SpellBad", { gui = "undercurl", sp = M.colors.red })
    M.highlight("SpellCap", { gui = "undercurl", sp = M.colors.special_grey })
    M.highlight("SpellLocal", { gui = "undercurl", sp = M.colors.special_grey })
    M.highlight("SpellRare", { gui = "undercurl", sp = M.colors.special_grey })
    M.highlight("StatusLine", { fg = M.colors.white, bg = M.colors.dark_black })
    M.highlight("StatusLineNC", { fg = M.colors.comment_grey, bg = M.colors.dark_black })
    M.highlight("TabLine", { fg = M.colors.comment_grey })
    M.highlight("TabLineFill", {})
    M.highlight("TabLineSel", { fg = M.colors.white })
    M.highlight("Title", { fg = M.colors.green })
    M.highlight("Visual", { fg = M.colors.visual_black, bg = M.colors.visual_grey })
    M.highlight("VisualNOS", { bg = M.colors.visual_grey })
    M.highlight("WarningMsg", { fg = M.colors.yellow })
    M.highlight("WildMenu", { fg = M.colors.black, bg = M.colors.blue })
    M.highlight("WinNormalNC", { bg = M.colors.dark_black })
    M.highlight("HighlightedyankRegion", { bg = M.colors.comment_grey })

    --- Languages

    -- Markdown
    M.highlight("markdownCode", { fg = M.colors.yellow })
    M.highlight("markdownCodeBlockBGBorder", { bg = M.colors.dark_black })
    M.highlight("markdownCodeBlockBGBorderSign", { fg = M.colors.gutter_fg_grey })
    M.highlight("markdownCodeBlock", { fg = M.colors.yellow })
    M.highlight("markdownCodeDelimiter", { fg = M.colors.cursor_grey })
    M.highlight("markdownHeadingDelimiter", { fg = M.colors.gutter_fg_grey })
    M.highlight("markdownRule", { fg = M.colors.comment_grey })
    M.highlight("markdownHeadingRule", { fg = M.colors.comment_grey })
    M.highlight("markdownH1", { fg = M.colors.green, gui = "bold,italic" })
    M.highlight("markdownH2", { fg = M.colors.yellow, gui = "bold,italic" })
    M.highlight("markdownH3", { fg = M.colors.green, gui = "bold,italic" })
    M.highlight("markdownH4", { fg = M.colors.green, gui = "bold,italic" })
    M.highlight("markdownH5", { fg = M.colors.green, gui = "bold,italic" })
    M.highlight("markdownH6", { fg = M.colors.green, gui = "bold,italic" })
    M.highlight("markdownIdDelimiter", { fg = M.colors.purple })
    M.highlight("markdownId", { fg = M.colors.purple })
    M.highlight("markdownBlockquote", { fg = M.colors.comment_grey })
    M.highlight("markdownItalic", { gui = "italic" })
    M.highlight("markdownBold", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("markdownListMarker", { fg = M.colors.red })
    M.highlight("markdownOrderedListMarker", { fg = M.colors.red })
    M.highlight("markdownIdDeclaration", { fg = M.colors.blue })
    M.highlight("markdownLinkText", { fg = M.colors.blue })
    M.highlight("markdownLinkDelimiter", { fg = M.colors.white })
    M.highlight("markdownUrl", { fg = M.colors.purple })
    M.highlight("MDTSFencedCodeBlock", { fg = M.colors.red })
    M.highlight("MDTSFencedCodeBlockInfo", { fg = M.colors.dark_yellow })
    M.highlight("@text.reference", { fg = M.colors.blue })
    M.highlight("MDTSLinkText", { fg = M.colors.white })

    M.highlight("CodeBlock", { bg = M.colors.dimm_black })
    M.highlight("HeadlineGreen", { bg = M.colors.diff_green })
    M.highlight("HeadlineBlue", { bg = M.colors.dimm_cursor_grey })
    M.highlight("HeadlineRed", { bg = M.colors.diff_red })
    M.highlight("HeadlinePurple", { bg = M.colors.diff_purple })
    M.highlight("HeadlineYellow", { bg = M.colors.diff_yellow })
    M.highlight("@OrgTSHeadlineLevel1", { fg = M.colors.green, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel2", { fg = M.colors.blue, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel3", { fg = M.colors.red, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel4", { fg = M.colors.purple, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel5", { fg = M.colors.yellow, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel6", { fg = M.colors.green, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel7", { fg = M.colors.blue, gui = "bold" })
    M.highlight("@OrgTSHeadlineLevel8", { fg = M.colors.red, gui = "bold" })

    --- Treesitter
    -- Misc
    M.highlight("TSError", { fg = M.colors.red })
    M.highlight("TSPunctDelimiter", { fg = M.colors.bracket_grey })
    M.highlight("TSPunctBracket", { fg = M.colors.bracket_grey })
    M.highlight("TSPunctSpecial", { fg = M.colors.bracket_grey })

    -- -- Constants
    -- -- M.highlight("TSConstant", {})
    M.highlight("TSConstBuiltin", { fg = M.colors.dark_yellow, gui = "bold" })
    -- -- Not sure about this guy
    -- M.highlight("TSConstMacro", {})
    -- M.highlight("TSString", {})
    -- M.highlight("TSStringRegex", {})
    M.highlight("TSStringEscape", { fg = M.colors.yellow })
    -- M.highlight("TSCharacter", {})
    -- M.highlight("TSNumber", {})
    -- M.highlight("TSBoolean", {})
    -- M.highlight("TSFloat", {})
    -- M.highlight("TSAnnotation", {})
    -- M.highlight("TSAttribute", {})
    -- M.highlight("TSNamespace", {})

    -- -- Functions
    M.highlight("TSFuncBuiltin", { fg = M.colors.dark_yellow, gui = "bold" })
    -- M.highlight("TSFunction", {})
    -- M.highlight("TSFuncMacro", {})
    -- M.highlight("TSParameter", {})
    -- M.highlight("TSParameterReference", {})
    -- M.highlight("TSMethod", {})
    -- M.highlight("TSField", {})
    -- M.highlight("TSProperty", {})
    M.highlight("TSConstructor", { fg = M.colors.red, gui = "bold" })

    -- -- Keywords
    -- M.highlight("TSConditional", {})
    -- M.highlight("TSRepeat", {})
    -- M.highlight("TSLabel", {})
    -- M.highlight("TSKeyword", {})
    -- M.highlight("TSKeywordFunction", {})
    -- M.highlight("TSKeywordOperator", {})
    -- M.highlight("TSOperator", {})
    -- M.highlight("TSException", {})
    -- M.highlight("TSType", {})
    M.highlight("TSTypeBuiltin", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("TSTextReference", { fg = M.colors.blue, gui = "underline" })
    -- M.highlight("TSStructure", {})
    -- M.highlight("TSInclude", {})

    -- -- Variable
    -- M.highlight("TSVariable", {})
    M.highlight("TSVariableBuiltin", { fg = M.colors.dark_yellow, gui = "bold" })

    -- -- Text
    -- M.highlight("TSText", {})
    -- M.highlight("TSStrong", {})
    -- M.highlight("TSEmphasis", {})
    -- M.highlight("TSUnderline", {})
    -- M.highlight("TSTitle", {})
    -- M.highlight("TSLiteral", {})
    M.highlight("TSURI", { fg = M.colors.blue, gui = "underline" })

    -- -- Tags
    -- M.highlight("TSTag", {})
    -- M.highlight("TSTagDelimiter", {})

    --- Plugins
    M.highlight("illuminatedWord", { gui = "bold" })

    M.highlight("diffAdded", { fg = M.colors.green })
    M.highlight("diffRemoved", { fg = M.colors.red })
    M.highlight("gitcommitComment", { fg = M.colors.gutter_fg_grey, gui = "italic,bold" })
    M.highlight("gitcommitUnmerged", { fg = M.colors.green })
    M.highlight("gitcommitOnBranch", {})
    M.highlight("gitcommitBranch", { fg = M.colors.purple })
    M.highlight("gitcommitDiscardedType", { fg = M.colors.red })
    M.highlight("gitcommitSelectedType", { fg = M.colors.green })
    M.highlight("gitcommitHeader", {})
    M.highlight("gitcommitUntrackedFile", { fg = M.colors.cyan })
    M.highlight("gitcommitDiscardedFile", { fg = M.colors.red })
    M.highlight("gitcommitSelectedFile", { fg = M.colors.green })
    M.highlight("gitcommitUnmergedFile", { fg = M.colors.yellow })
    M.highlight("gitcommitFile", {})
    M.highlight("gitcommitSummary", { fg = M.colors.white })
    M.highlight("gitcommitOverflow", { fg = M.colors.red })

    M.highlight("GitHubUserName", { fg = M.colors.purple, gui = "italic" })
    M.highlight("GitHubDate", { fg = M.colors.yellow })
    M.highlight("GitHubCommentLength", { fg = M.colors.comment_grey, gui = "italic" })
    M.highlight("GitHubAuthorAssociation", { fg = M.colors.special_grey, gui = "italic,bold" })

    M.highlight("Defx_git_Untracked", { fg = M.colors.red })
    M.link("Defx_git_4_Untracked", "gitcommitUntrackedFile")
    M.link("Defx_git_4_Ignored", "gitcommitSummary")
    M.link("Defx_git_4_Unknown", "gitcommitSummary")
    M.link("Defx_git_4_Renamed", "gitcommitBranch")
    M.link("Defx_git_4_Modified", "gitcommitUnmergedFile")
    M.link("Defx_git_4_Unmerged", "diffRemoved")
    M.link("Defx_git_4_Deleted", "diffRemoved")
    M.link("Defx_git_4_Staged", "diffAdded")

    M.highlight("VimwikiHR", { fg = M.colors.yellow })
    M.highlight("VimwikiPre", { fg = M.colors.cursor_grey })
    M.highlight("VimwikiItalic", { gui = "italic" })
    M.highlight("OrgColorTagRed", { fg = M.colors.red })
    M.highlight("OrgColorTagCyan", { fg = M.colors.cyan })
    M.highlight("OrgColorTagGreen", { fg = M.colors.green })
    M.highlight("OrgColorTagBlue", { fg = M.colors.blue })
    M.highlight("OrgColorTagPurple", { fg = M.colors.purple })
    M.highlight("OrgColorTagYellow", { fg = M.colors.yellow })
    M.highlight("OrgColorTagOrange", { fg = M.colors.dark_yellow })
    M.highlight("VimwikiDate", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("VimwikiHeaderChar", { fg = M.colors.comment_grey })
    M.highlight("OrgQuote", { fg = M.colors.bracket_grey, gui = "italic" })

    M.highlight("Whitespace", { fg = M.colors.cursor_grey })

    M.link("gwitcommitNoBranch", "gitcommitBranch")
    M.link("gitcommitUntracked", "gitcommitComment")
    M.link("gitcommitDiscarded", "gitcommitComment")
    M.link("gitcommitSelected", "gitcommitComment")
    M.link("gitcommitDiscardedArrow", "gitcommitDiscardedFile")
    M.link("gitcommitSelectedArrow", "gitcommitSelectedFile")
    M.link("gitcommitUnmergedArrow", "gitcommitUnmergedFile")

    M.link("gitmessengerPopupNormal", "WinNormalNC")

    M.highlight("GitGutterAdd", { fg = M.colors.green })
    M.highlight("GitGutterChange", { fg = M.colors.dark_yellow })
    M.highlight("GitGutterDelete", { fg = M.colors.red })

    M.highlight("EchoDocFloat", { bg = M.colors.dark_black })

    M.highlight("DiagnosticError", { fg = M.colors.dark_red, gui = "bold" })
    M.highlight("DiagnosticWarn", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("DiagnosticInfo", { fg = M.colors.cyan, gui = "bold" })
    M.highlight("DiagnosticHint", { fg = M.colors.comment_grey, gui = "bold" })
    M.highlight("DiagnosticUnderlineError", { sp = M.colors.dark_red, gui = "undercurl" })
    M.highlight("DiagnosticUnderlineWarn", { sp = M.colors.dark_yellow, gui = "undercurl" })
    M.highlight("DiagnosticUnderlineInfo", { sp = M.colors.cyan, gui = "undercurl" })
    M.highlight("DiagnosticUnderlineHint", { sp = M.colors.comment_grey, gui = "undercurl" })
    M.highlight("FloatBorder", { fg = M.colors.comment_grey })
    M.highlight("FloatBorderDark", { fg = M.colors.comment_grey, bg = M.colors.dark_black })
    M.highlight("FloatShadow", { bg = M.colors.black, blend = 80 })
    M.highlight("FloatShadowThrough", { bg = M.colors.black, blend = 100 })

    M.highlight("TSDefinitionUsage", { gui = "bold" })
    M.highlight("TSDefinition", { gui = "bold" })

    M.highlight("IndentBlanklineContextChar", { fg = M.colors.visual_grey, gui = "nocombine" })
    M.highlight("IndentBlanklineContextStart", { sp = M.colors.visual_grey, gui = "underline" })
    M.highlight("IndentBlanklineContextSpaceChar", { gui = "nocombine" })

    M.highlight("RenamePrompt", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("DiagnosticSource", { fg = M.colors.cursor_grey, gui = "bold" })

    M.link("BqfPreviewRange", "DiffChange")

    M.link("Dash", "markdownBold")

    M.highlight("CmpItemAbbr", { fg = M.colors.white })
    M.highlight("CmpItemAbbrDeprecated", { fg = M.colors.comment_grey })
    M.highlight("CmpItemAbbrMatchFuzzy", { fg = M.colors.yellow })
    M.highlight("CmpItemMenu", { fg = M.colors.comment_grey })
    M.highlight("CmpItemKindMethod", { fg = M.colors.blue })
    M.highlight("CmpItemKindFunction", { fg = M.colors.blue })
    M.highlight("CmpItemKindVariable", { fg = M.colors.red })
    M.highlight("CmpItemKindConstant", { fg = M.colors.purple })
    M.highlight("CmpItemKindProperty", { fg = M.colors.red })
    M.highlight("CmpItemKindField", { fg = M.colors.red })
    M.highlight("CmpItemKindEnumMember", { fg = M.colors.cyan })
    M.highlight("CmpItemKindText", { fg = M.colors.yellow })
    M.highlight("CmpItemKindClass", { fg = M.colors.dark_yellow })
    M.highlight("CmpItemKindInterface", { fg = M.colors.dark_yellow })
    M.highlight("CmpItemKindStruct", { fg = M.colors.dark_yellow })
    M.highlight("CmpItemKindModule", { fg = M.colors.cyan })

    M.highlight("LightspeedUnlabeledMatch", { bg = M.colors.red, fg = M.colors.black, gui = "bold" })
    M.highlight("LightspeedLabel", { fg = M.colors.purple, gui = "bold" })
    M.highlight("LightspeedShortcut", { bg = M.colors.purple, fg = M.colors.black, gui = "bold" })

    M.highlight("org_hyperlink", { fg = M.colors.blue, gui = "underline" })
    M.highlight("org_verbatim", { fg = M.colors.bracket_grey, gui = "italic" })
    M.highlight("org_code", { fg = M.colors.yellow, bg = M.colors.dimm_black })
    M.highlight("OrgTSTable", { bg = M.colors.dark_cursor_grey })

    M.highlight("CodeBlock", { bg = M.colors.dimm_black })
    M.highlight("Quote", { fg = M.colors.dark_yellow })

    M.highlight("NotifyERRORBorder", { fg = M.colors.red })
    M.highlight("NotifyWARNBorder", { fg = M.colors.dark_yellow })
    M.highlight("NotifyINFOBorder", { fg = M.colors.green })
    M.highlight("NotifyDEBUGBorder", { fg = M.colors.comment_grey })
    M.highlight("NotifyTRACEBorder", { fg = M.colors.purple })
    M.highlight("NotifyERRORIcon", { fg = M.colors.red })
    M.highlight("NotifyWARNIcon", { fg = M.colors.dark_yellow })
    M.highlight("NotifyINFOIcon", { fg = M.colors.green })
    M.highlight("NotifyDEBUGIcon", { fg = M.colors.comment_grey })
    M.highlight("NotifyTRACEIcon", { fg = M.colors.purple })
    M.highlight("NotifyERRORTitle", { fg = M.colors.red })
    M.highlight("NotifyWARNTitle", { fg = M.colors.dark_yellow })
    M.highlight("NotifyINFOTitle", { fg = M.colors.green })
    M.highlight("NotifyDEBUGTitle", { fg = M.colors.comment_grey })
    M.highlight("NotifyTRACETitle", { fg = M.colors.purple })

    M.highlight("NavicSeparator", { fg = M.colors.comment_grey, bg = M.colors.dark_black })

    M.highlight("NavicIconsFunction", { fg = M.colors.green, bg = M.colors.dark_black })
    M.highlight("NavicIconsMethod", { fg = M.colors.green, bg = M.colors.dark_black })
    M.highlight("NavicIconsVariable", { fg = M.colors.blue, bg = M.colors.dark_black })
    M.highlight("NavicIconsConstant", { fg = M.colors.purple, bg = M.colors.dark_black })
    M.highlight("NavicIconsProperty", { fg = M.colors.blue, bg = M.colors.dark_black })
    M.highlight("NavicIconsStruct", { fg = M.colors.purple, bg = M.colors.dark_black })
    M.highlight("NavicIconsInterface", { fg = M.colors.cyan, bg = M.colors.dark_black })
    M.highlight("NavicIconsEnum", { fg = M.colors.yellow, bg = M.colors.dark_black })
    M.highlight("NavicIconsField", { fg = M.colors.yellow, bg = M.colors.dark_black })
    M.highlight("NavicIconsClass", { fg = M.colors.purple, bg = M.colors.dark_black })

    M.highlight("NavicText", { fg = M.colors.comment_grey, bg = M.colors.dark_black })

    M.highlight("CCovered", { fg = M.colors.dark_green })
    -- M.highlight("CUncovered", { fg = M.colors.red })

    M.highlight("DapUIScope", { fg = M.colors.blue })
    M.highlight("DapUIType", { fg = M.colors.yellow })
    M.highlight("DapUIVariable", { fg = M.colors.red })
    M.highlight("DapUIDecoration", { fg = M.colors.purple })
    M.highlight("DapUIModifiedValue", { fg = M.colors.dark_yellow, gui = "bold" })
    M.highlight("DapUIThread", { fg = M.colors.green })
    M.highlight("DapUIStoppedThread", { fg = M.colors.cyan })
    M.highlight("DapUISource", { fg = M.colors.green })
    M.highlight("DapUILineNumber", { fg = M.colors.dark_yellow })
    M.highlight("DapUIFloatBorder", { fg = M.colors.comment_grey })
    M.highlight("DapUIWatchesHeader", { fg = M.colors.cyan })
    M.highlight("DapUIWatchesEmpty", { fg = M.colors.red })
    M.highlight("DapUIWatchesValue", { fg = M.colors.green })
    M.highlight("DapUIWatchesError", { fg = M.colors.dark_red })
    M.highlight("DapUIWatchesFrame", { fg = M.colors.purple })
    M.highlight("DapUIBreakpointsPath", { fg = M.colors.green })
    M.highlight("DapUIBreakpointsInfo", { fg = M.colors.green })
    M.highlight("DapUIBreakpointsCurrentLine", { fg = M.colors.yellow })
    M.highlight("DapUIBreakpointsLine", { fg = M.colors.cyan })
    M.highlight("DapUIFrameName", { fg = M.colors.red })

    M.highlight("OctoEditable", { bg = M.colors.dimm_black })

    M.highlight("SjLabel", { fg = M.colors.black, bg = M.colors.purple, gui = "bold" })
    M.highlight("SjSearch", { fg = M.colors.green })

    M.highlight("PackageInfoUpToDateVersion", { fg = M.colors.cyan })
    M.highlight("PackageInfoOutdatedVersion", { fg = M.colors.dark_yellow })

    M.highlight("NeotestUnknown", { fg = M.colors.comment_grey })
    M.highlight("NeotestSkipped", { fg = M.colors.yellow })
    M.highlight("NeotestRunning", { fg = M.colors.purple })
    M.highlight("NeotestPassed", { fg = M.colors.green })
    M.highlight("NeotestFailed", { fg = M.colors.dark_red })
end

return M

-- ===============================================
-- config/nvim-tree.lua
-- ===============================================

-- 侧边文件树
vim.opt.termguicolors = true

require("nvim-tree").setup({
    sort_by = "case_sensitive",
    hijack_cursor = true,
    system_open = {
        cmd = "open",
    },
    view = {
        width = 30,
        number = true,
        adaptive_size = false,
    },
    renderer = {
        group_empty = true,
        -- 图标
        icons = {
            show = {
                git = true,
                file = true,
                folder = true,
                folder_arrow = true,
            },
            glyphs = {
                bookmark = " ",
                folder = {
                    arrow_closed = "⏵",
                    arrow_open = "⏷",
                },
                git = {
                    unstaged = "✗",
                    staged = "✓",
                    unmerged = "⌥",
                    renamed = "➜",
                    untracked = "★",
                    deleted = "⊖",
                    ignored = "◌",
                },
            },
        },
        special_files = { "Cargo.toml", "Makefile", "README.md", "readme.md" },
    },
    filters = {
        dotfiles = true,
    },
})
```

## 命令补全
```lua
-- ===============================================
-- core/plugins/which-key.lua
-- ===============================================
-- 弹出一个窗口, 显示所有可能的绑定的快捷键
return {
    {
        'folke/which-key.nvim',
        config = function()
            require('which-key').setup()
        end
    }
}
```

## 全局设置插件
```lua
-- ===============================================
-- core/plugins/neoconf.lua
-- ===============================================
return {
    {
        "folke/neoconf.nvim",
        cmd = "Neoconf"
    },
}
```

## 全局搜索插件
需要先安装 [ripgrep](https://githubfast.com/BurntSushi/ripgrep)
```lua
-- ===============================================
-- core/plugins/telescope.lua
-- ===============================================
return {
    {
        'nvim-telescope/telescope.nvim',
        tag = '0.1.1',
        dependencies = { 'nvim-lua/plenary.nvim' },
        config = function()
            require('telescope').setup {}
        end
    }
}

-- ===============================================
-- config/telescope.lua
-- ===============================================
require('telescope').setup {
    defaults = {
        layout_config = {
            center = {
                height = 0.6,
                preview_cutoff = 80,
                prompt_position = "top",
                width = 0.5
            },
        },
    },
    pickers = {
        find_files = {
            theme = "dropdown",
        }
    },
    extensions = {
        fzf = {
            fuzzy = true,                    -- false will only do exact matching
            override_generic_sorter = true,  -- override the generic sorter
            override_file_sorter = true,     -- override the file sorter
            case_mode = "smart_case",        -- or "ignore_case" or "respect_case"
        }
    }
}
```

## 其他的一些可选插件
```lua
-- ===============================================
-- core/plugins/effect.lua
-- ===============================================
-- 显示光标所在的行
return {
    {
        'edluffy/specs.nvim',
        config = function()
            require('specs').setup{
                show_jumps  = true,
                min_jump = 30,
                popup = {
                    delay_ms = 0, -- delay before popup displays
                    inc_ms = 10, -- time increments used for fade/resize effects
                    blend = 10, -- starting blend, between 0-100 (fully transparent), see :h winblend
                    width = 10,
                    winhl = "PMenu",
                    fader = require('specs').sinus_fader,
                    resizer = require('specs').shrink_resizer
                },
                ignore_filetypes = {},
                ignore_buftypes = {
                    nofile = true,
                },
            }
        end,
    },
}
```

## 键盘重映射
为了方便操作, 可以将一些常用快捷键进行重映射

新建 `core/keymap.lua`, 随后可以选择在 `core/base.lua` 中加载它
```lua
-- 键盘映射
local map = vim.api.nvim_set_keymap
local opts = { noremap = true, silent = true }
-- map('模式','按键','映射为XX',opt)
-- map('n/i/v','<leader已被init映射为空格>xx','<Cmd>xx<CR>',opts)

-- 一些习惯性按键
-- i 模式下将 qq 映射为 esc 键,键入q等待后可再次输入q
map('i', 'qq', '<Esc>', opts)
-- 快速上下跳转9行
map('n', '<C-u>', '9k', opts)
map('n', '<C-d>', '9j', opts)

-- 侧边文件树
map('n', '<leader>t', ':NvimTreeToggle<CR>', opts)

-- 分屏相关
map("n", "sv", ":vsp<CR>", opts) -- 垂直分屏
map("n", "sh", ":sp<CR>", opts) -- 水平分屏
map("n", "sc", "<C-w>c", opts) -- 关闭当前分屏
map("n", "so", "<C-w>o", opts) -- 关闭其他分屏 close others

-- 窗口转跳相关
map("n", "<A-h>", "<C-w>h", opts)
map("n", "<A-j>", "<C-w>j", opts)
map("n", "<A-k>", "<C-w>k", opts)
map("n", "<A-l>", "<C-w>l", opts)
-- 一些类似Windows习惯的按键
-- map('n', '<C-d>', '<dd>', opts)
-- map('n', '<C-c>', '<yy>', opts)
-- map('n', '<C-p>', '<p>', opts)

-- barbar buffer标签栏按键
-- Move to previous/next
map('n', '<A-,>', '<Cmd>BufferPrevious<CR>', opts)
map('n', '<A-.>', '<Cmd>BufferNext<CR>', opts)
-- Re-order to previous/next
map('n', '<A-<>', '<Cmd>BufferMovePrevious<CR>', opts)
map('n', '<A->>', '<Cmd>BufferMoveNext<CR>', opts)
-- Goto buffer in position...
map('n', '<A-1>', '<Cmd>BufferGoto 1<CR>', opts)
map('n', '<A-2>', '<Cmd>BufferGoto 2<CR>', opts)
map('n', '<A-3>', '<Cmd>BufferGoto 3<CR>', opts)
map('n', '<A-4>', '<Cmd>BufferGoto 4<CR>', opts)
map('n', '<A-5>', '<Cmd>BufferGoto 5<CR>', opts)
map('n', '<A-6>', '<Cmd>BufferGoto 6<CR>', opts)
map('n', '<A-7>', '<Cmd>BufferGoto 7<CR>', opts)
map('n', '<A-8>', '<Cmd>BufferGoto 8<CR>', opts)
map('n', '<A-9>', '<Cmd>BufferGoto 9<CR>', opts)
map('n', '<A-0>', '<Cmd>BufferLast<CR>', opts)
-- Pin/unpin buffer
map('n', '<A-p>', '<Cmd>BufferPin<CR>', opts)
-- Close buffer
map('n', '<A-c>', '<Cmd>BufferClose<CR>', opts)
-- Wipeout buffer
--                 :BufferWipeout
-- Close commands
--                 :BufferCloseAllButCurrent
--                 :BufferCloseAllButPinned
--                 :BufferCloseAllButCurrentOrPinned
--                 :BufferCloseBuffersLeft
--                 :BufferCloseBuffersRight
-- Magic buffer-picking mode
map('n', '<C-p>', '<Cmd>BufferPick<CR>', opts)
-- 标签自动排序
map('n', '<leader>bb', '<Cmd>BufferOrderByBufferNumber<CR>', opts)
map('n', '<leader>bd', '<Cmd>BufferOrderByDirectory<CR>', opts)
map('n', '<leader>bl', '<Cmd>BufferOrderByLanguage<CR>', opts)
map('n', '<leader>bw', '<Cmd>BufferOrderByWindowNumber<CR>', opts)

-- 切换aerial大纲是否显示
map('n', '<leader>a', '<cmd>AerialToggle!<CR>', opts)

-- telescope
map('n', '<leader>ff', ':Telescope find_files<CR>', opts)
map('n', '<leader>fw', ':Telescope live_grep<CR>', opts)

-- specs.nvim 定位光标
map('n', 'ss', ':lua require("specs").show_specs()<CR>', opts)
```