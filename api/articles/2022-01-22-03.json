{"title":"在 Hexo 中使用更强大的 Markdown 引擎","uid":"95f2e6cc37d8e9265a49ea0ed5ffc5cb","slug":"2022-01-22-03","date":"2022-01-22T07:59:52.000Z","updated":"2024-03-06T02:36:48.103Z","comments":true,"path":"api/articles/2022-01-22-03.json","keywords":"Programming, Web, Frontend, Backend ,Rust, Blog, Aurora, Fontlos, 芳塔洛斯","cover":"https://fontlos.com/icons/logo.png","content":"<h1 id=\"Hexo-的默认引擎\"><a href=\"#Hexo-的默认引擎\" class=\"headerlink\" title=\"Hexo 的默认引擎\"></a>Hexo 的默认引擎</h1><p>Hexo 默认的 Markdown 渲染器是 <em>hexo-renderer-marked</em>, 针对于普通的 Markdown 文章书写, 该渲染器已经足够, 但是还是有着诸多缺陷, 比如不支持 <em>Mathjax</em>, 不支持插件扩展, 不支持 emoji 表情…</p>\n<p>以及有的时候会出现奇怪的 bug, 比如在 html 代码块中的 <code>{{ }} {% %}</code> 会被当成 Tag-Plugins, 破坏了代码块的密封性, 导致部分 Html 标签被渲染, 使页面变得十分奇怪</p>\n<h1 id=\"Markdown-it-引擎\"><a href=\"#Markdown-it-引擎\" class=\"headerlink\" title=\"Markdown-it 引擎\"></a>Markdown-it 引擎</h1><h2 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h2><p>采用 <strong>Markdown-it</strong> 内核, 基本支持 Mathjax 语法, 支持 Markdown 以及 CommonMark 语法, 渲染速度比 <em>hexo-renderer-marked</em> 快, 支持插件配置, 支持标题带安全的 ID 信息, 支持脚注等</p>\n<h1 id=\"安装和配置\"><a href=\"#安装和配置\" class=\"headerlink\" title=\"安装和配置\"></a>安装和配置</h1><p>安装只需要两行命令</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 卸载默认引擎</span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">npm</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">un</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">hexo-renderer-marked</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">-S</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 安装新引擎</span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">npm</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">i</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">hexo-renderer-markdown-it</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">-S</span></span></code></pre></div><p>需要的话可以再安装一些插件, 可以 <a href=\"https://www.npmjs.com/\">NPM</a> 里进行搜索，关键字是 <code>keywords:markdown-it-plugin</code></p>\n<p>比如, 如果有渲染公式的需要, 可以考虑 <strong>Katex</strong>, 对比 Mathjax 更加轻量</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #61AFEF\">npm</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">i</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">katex</span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">npm</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">i</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">@andatoshiki/markdown-it-katex</span></span></code></pre></div><p>然后在<code>&lt;head&gt;</code>加入Katex的css</p>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #ABB2BF\">&lt;</span><span style=\"color: #E06C75\">link</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">rel</span><span style=\"color: #ABB2BF\">=</span><span style=\"color: #98C379\">&quot;stylesheet&quot;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">href</span><span style=\"color: #ABB2BF\">=</span><span style=\"color: #98C379\">&quot;https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css&quot;</span><span style=\"color: #ABB2BF\">&gt;</span></span></code></pre></div><p>然后 <code>_config.yml</code> 添加相关配置</p>\n<div class=\"language-yml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">yml</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #E06C75\">markdown</span><span style=\"color: #ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #E06C75\">render</span><span style=\"color: #ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">html</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">true</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7F848E; font-style: italic\"># 在 md 文件中直接内联 html</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">xhtmlOut</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">false</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7F848E; font-style: italic\"># 输出为符合 xhtml 的文件</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">breaks</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">true</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7F848E; font-style: italic\"># 可以用 &lt;br&gt; 换行</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">linkify</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">true</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7F848E; font-style: italic\"># 自动将可能是链接的内容转换成链接</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">typographer</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">true</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7F848E; font-style: italic\"># 渲染(C), TM 等印刷标识</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #E06C75\">plugins</span><span style=\"color: #ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        - </span><span style=\"color: #98C379\">markdown-it-abbr</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        - </span><span style=\"color: #98C379\">markdown-it-footnote</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        - </span><span style=\"color: #98C379\">markdown-it-ins</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        - </span><span style=\"color: #98C379\">markdown-it-sub</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        - </span><span style=\"color: #98C379\">markdown-it-sup</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        - </span><span style=\"color: #E06C75\">name</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #98C379\">&#39;@andatoshiki/markdown-it-katex&#39;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #E06C75\">anchors</span><span style=\"color: #ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">level</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">2</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">collisionSuffix</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #98C379\">&#39;&#39;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">permalink</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #98C379\">false,</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">permalinkClass</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #98C379\">&#39;header-anchor&#39;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">permalinkSymbol</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #98C379\">&#39;&#39;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">case</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #D19A66\">0</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #E06C75\">separator</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #98C379\">&#39;&#39;</span></span></code></pre></div>","feature":false,"text":"Hexo 的默认引擎Hexo 默认的 Markdown 渲染器是 hexo-renderer-marked, 针对于普通的 Markdown 文章书写, 该渲染...","permalink":"/post/2022-01-22-03","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"Note","slug":"Note","count":9,"path":"api/categories/Note.json"}],"tags":[{"name":"Hexo","slug":"Hexo","count":3,"path":"api/tags/Hexo.json"},{"name":"Markdown","slug":"Markdown","count":1,"path":"api/tags/Markdown.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Hexo-%E7%9A%84%E9%BB%98%E8%AE%A4%E5%BC%95%E6%93%8E\"><span class=\"toc-text\">Hexo 的默认引擎</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Markdown-it-%E5%BC%95%E6%93%8E\"><span class=\"toc-text\">Markdown-it 引擎</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BC%98%E7%82%B9\"><span class=\"toc-text\">优点</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">安装和配置</span></a></li></ol>","author":{"name":"芳塔洛斯","slug":"blog-author","avatar":"https://fontlos.com/icons/avatar.jpg","link":"/","description":"来人间一趟, 为散步一场<br />待走出岁月, 何样的彼方<br />才配得上这一路的颠沛与时光","socials":{"github":"https://github.com/fontlos","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://fontlos.com/icons/bilibili.svg","link":"https://space.bilibili.com/362772872"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"Zola使用教程(2) Content","uid":"34996d157a20fe53332a98eb287335c4","slug":"2022-01-23","date":"2022-01-22T16:01:03.000Z","updated":"2024-03-06T02:36:48.103Z","comments":true,"path":"api/articles/2022-01-23.json","keywords":"Programming, Web, Frontend, Backend ,Rust, Blog, Aurora, Fontlos, 芳塔洛斯","cover":"https://fontlos.com/icons/logo.png","text":"Zola的文件结构和分类系统...","permalink":"/post/2022-01-23","photos":[],"count_time":{"symbolsCount":"3.2k","symbolsTime":"3 mins."},"categories":[{"name":"Note","slug":"Note","count":9,"path":"api/categories/Note.json"}],"tags":[{"name":"Zola","slug":"Zola","count":3,"path":"api/tags/Zola.json"},{"name":"Frontend","slug":"Frontend","count":5,"path":"api/tags/Frontend.json"}],"author":{"name":"芳塔洛斯","slug":"blog-author","avatar":"https://fontlos.com/icons/avatar.jpg","link":"/","description":"来人间一趟, 为散步一场<br />待走出岁月, 何样的彼方<br />才配得上这一路的颠沛与时光","socials":{"github":"https://github.com/fontlos","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://fontlos.com/icons/bilibili.svg","link":"https://space.bilibili.com/362772872"}}}},"feature":false},"next_post":{"title":"禁用 Hexo 的 Tag Plugins","uid":"d3bcecf34684df8d91318c48f7472df1","slug":"2022-01-22-02","date":"2022-01-21T16:04:09.000Z","updated":"2024-03-06T02:36:48.103Z","comments":true,"path":"api/articles/2022-01-22-02.json","keywords":"Programming, Web, Frontend, Backend ,Rust, Blog, Aurora, Fontlos, 芳塔洛斯","cover":"https://fontlos.com/icons/logo.png","text":"有的时候 markdown 的代码块里会有一些 Nunjucks代码, 比如{{ }}, {% %}, 但不巧的是 Hexo 的 markdown 渲染引擎也用...","permalink":"/post/2022-01-22-02","photos":[],"count_time":{"symbolsCount":263,"symbolsTime":"1 mins."},"categories":[{"name":"Note","slug":"Note","count":9,"path":"api/categories/Note.json"}],"tags":[{"name":"Hexo","slug":"Hexo","count":3,"path":"api/tags/Hexo.json"}],"author":{"name":"芳塔洛斯","slug":"blog-author","avatar":"https://fontlos.com/icons/avatar.jpg","link":"/","description":"来人间一趟, 为散步一场<br />待走出岁月, 何样的彼方<br />才配得上这一路的颠沛与时光","socials":{"github":"https://github.com/fontlos","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://fontlos.com/icons/bilibili.svg","link":"https://space.bilibili.com/362772872"}}}},"feature":false}}