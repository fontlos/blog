{"title":"Tauri 2.0 Beta 版创建跨桌面和手机的应用","uid":"02235f1513e7db7d325ab085789e0935","slug":"2024-03-04","date":"2024-03-04T13:44:23.000Z","updated":"2024-03-06T02:36:48.103Z","comments":true,"path":"api/articles/2024-03-04.json","keywords":"Programming, Web, Frontend, Backend ,Rust, Blog, Aurora, Fontlos, 芳塔洛斯","cover":"https://fontlos.com/icons/logo.png","content":"<h1 id=\"安装-Tauri-Cli\"><a href=\"#安装-Tauri-Cli\" class=\"headerlink\" title=\"安装 Tauri Cli\"></a>安装 Tauri Cli</h1><p>这里默认大家已经装好了 <strong>Android Studio</strong> 及其相关组件</p>\n<p>然后到 <a href=\"https://github.com/tauri-apps/tauri/releases\"><strong>Github 发布页面</strong></a> 下载到最新版本的 <strong>Tauri Cli</strong>, 截止到本文写作时间, 最新版本是 <code>tauri-cli 2.0.0-beta.6</code>, 下载解压后加入环境变量</p>\n<h1 id=\"创建项目\"><a href=\"#创建项目\" class=\"headerlink\" title=\"创建项目\"></a>创建项目</h1><p>这里我们使用 Pnpm 来创建项目</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #61AFEF\">pnpm</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">create</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">tauri-app</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">--beta</span></span></code></pre></div><p>这将会提示几个问题, 前面按需填写, 最后是否创建安卓应用选择 <code>yes</code></p>\n<h1 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h1><p>打开 <code>./src-tauri/tauri.conf.json</code>, 修改其中的 <code>identifier</code> 项</p>\n<p>随后运行</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 初始化样板代码</span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">pnpm</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">tauri</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">android</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">init</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 在 Android Studio 中打开项目</span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">pnpm</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">tauri</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">android</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">open</span></span></code></pre></div><h1 id=\"配置签名文件\"><a href=\"#配置签名文件\" class=\"headerlink\" title=\"配置签名文件\"></a>配置签名文件</h1><p>我们只需要借助 Android Studio 生成签名文件, 在菜单栏 <code>Build -&gt; Generate Signed Bundle/APK</code> 选择创建新的 Key, 其中以下几条是关键信息</p>\n<ul>\n<li>Key store path: <code>.jks</code> Key 文件保存路径</li>\n<li>Key store password: Key 文件的密码</li>\n<li>Key Alias: Key 文件中的一个标识符</li>\n<li>Key password: 对应标识符的密码</li>\n</ul>\n<p>接下来创建 <code>src-tauri/gen/android/key.properties</code> 文件, 写入以下内容</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #abb2bf\">storePassword=&lt;Key store password&gt;</span></span>\n<span class=\"line\"><span style=\"color: #abb2bf\">keyPassword=&lt;Key password&gt;</span></span>\n<span class=\"line\"><span style=\"color: #abb2bf\">keyAlias=&lt;Key Alias&gt;</span></span>\n<span class=\"line\"><span style=\"color: #abb2bf\">storeFile=&lt;Key store path, 注意是绝对路径, 且需要双斜杠&gt;</span></span></code></pre></div><p>接下来修改 <code>src-tauri/gen/android/app/build.gradle.kts</code> 文件, 下面仅展示了需要增添的内容</p>\n<div class=\"language-kts\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">kts</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">import</span><span style=\"color: #ABB2BF\"> java.util.Properties</span></span>\n<span class=\"line\"><span style=\"color: #C678DD\">import</span><span style=\"color: #ABB2BF\"> java.io.FileInputStream</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">...</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">val</span><span style=\"color: #ABB2BF\"> keyPropertiesFile </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> rootProject.</span><span style=\"color: #61AFEF\">file</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;key.properties&quot;</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #C678DD\">val</span><span style=\"color: #ABB2BF\"> keyProperties </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">Properties</span><span style=\"color: #ABB2BF\">()</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">keyProperties.</span><span style=\"color: #61AFEF\">load</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #61AFEF\">FileInputStream</span><span style=\"color: #ABB2BF\">(keyPropertiesFile))</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">android</span><span style=\"color: #ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    ...</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #61AFEF\">defaultConfig</span><span style=\"color: #ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        ...</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #61AFEF\">signingConfigs</span><span style=\"color: #ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">       </span><span style=\"color: #61AFEF\">create</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;release&quot;</span><span style=\"color: #ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">           keyAlias </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> keyProperties[</span><span style=\"color: #98C379\">&quot;keyAlias&quot;</span><span style=\"color: #ABB2BF\">] </span><span style=\"color: #C678DD\">as</span><span style=\"color: #ABB2BF\"> String</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">           keyPassword </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> keyProperties[</span><span style=\"color: #98C379\">&quot;keyPassword&quot;</span><span style=\"color: #ABB2BF\">] </span><span style=\"color: #C678DD\">as</span><span style=\"color: #ABB2BF\"> String</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">           storeFile </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">file</span><span style=\"color: #ABB2BF\">(keyProperties[</span><span style=\"color: #98C379\">&quot;storeFile&quot;</span><span style=\"color: #ABB2BF\">] </span><span style=\"color: #C678DD\">as</span><span style=\"color: #ABB2BF\"> String)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">           storePassword </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> keyProperties[</span><span style=\"color: #98C379\">&quot;storePassword&quot;</span><span style=\"color: #ABB2BF\">] </span><span style=\"color: #C678DD\">as</span><span style=\"color: #ABB2BF\"> String</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">       }</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #61AFEF\">buildTypes</span><span style=\"color: #ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        ...</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #61AFEF\">getByName</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;release&quot;</span><span style=\"color: #ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            ...</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            signingConfig </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> signingConfigs.</span><span style=\"color: #61AFEF\">getByName</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;release&quot;</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            </span><span style=\"color: #61AFEF\">proguardFiles</span><span style=\"color: #ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">                ...</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            )</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        }</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    ...</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">}</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">...</span></span></code></pre></div><p>接下来运行类似以下命令就可以正常编译且签名了</p>\n<div class=\"language-sh\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sh</span><pre class=\"shiki one-dark-pro\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #61AFEF\">pnpm</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">tauri</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">android</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">build</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">--target</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">aarch64</span></span></code></pre></div>","feature":false,"text":"安装 Tauri Cli这里默认大家已经装好了 Android Studio 及其相关组件 然后到 Github 发布页面 下载到最新版本的 Tauri Cli...","permalink":"/post/2024-03-04","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"Note","slug":"Note","count":9,"path":"api/categories/Note.json"}],"tags":[{"name":"Rust","slug":"Rust","count":12,"path":"api/tags/Rust.json"},{"name":"Tauri","slug":"Tauri","count":2,"path":"api/tags/Tauri.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85-Tauri-Cli\"><span class=\"toc-text\">安装 Tauri Cli</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">创建项目</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">修改配置</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E7%AD%BE%E5%90%8D%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">配置签名文件</span></a></li></ol>","author":{"name":"芳塔洛斯","slug":"blog-author","avatar":"https://fontlos.com/icons/avatar.jpg","link":"/","description":"来人间一趟, 为散步一场<br />待走出岁月, 何样的彼方<br />才配得上这一路的颠沛与时光","socials":{"github":"https://github.com/fontlos","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://fontlos.com/icons/bilibili.svg","link":"https://space.bilibili.com/362772872"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"初识 Rust(1) | Rust 环境配置","uid":"56db3bc75e0f5c25df1df7381c2e80ef","slug":"RustCourse-01","date":"2021-04-05T01:54:09.000Z","updated":"2024-03-06T02:36:48.103Z","comments":true,"path":"api/articles/RustCourse-01.json","keywords":"Programming, Web, Frontend, Backend ,Rust, Blog, Aurora, Fontlos, 芳塔洛斯","cover":"https://fontlos.com/cover/ferris.png","text":"这是一个非官方的 Rust 语言简易教程, 目的是让新手快速熟练基本语法, 在实践中编写并加入了自己的理解和一些在其他教程中可能很少会被提到的琐碎之物...","permalink":"/post/RustCourse-01","photos":[],"count_time":{"symbolsCount":"3.2k","symbolsTime":"3 mins."},"categories":[{"name":"Course","slug":"Course","count":11,"path":"api/categories/Course.json"}],"tags":[{"name":"Rust","slug":"Rust","count":12,"path":"api/tags/Rust.json"}],"author":{"name":"芳塔洛斯","slug":"blog-author","avatar":"https://fontlos.com/icons/avatar.jpg","link":"/","description":"来人间一趟, 为散步一场<br />待走出岁月, 何样的彼方<br />才配得上这一路的颠沛与时光","socials":{"github":"https://github.com/fontlos","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://fontlos.com/icons/bilibili.svg","link":"https://space.bilibili.com/362772872"}}}},"feature":true},"next_post":{"title":"编译 Tauri 项目时无法下载 WixTools 或 Nsis 的解决方法","uid":"058683a9fd69c6e65647f15e0808060d","slug":"2024-01-26","date":"2024-01-26T07:44:43.000Z","updated":"2024-03-06T02:36:48.103Z","comments":true,"path":"api/articles/2024-01-26.json","keywords":"Programming, Web, Frontend, Backend ,Rust, Blog, Aurora, Fontlos, 芳塔洛斯","cover":"https://fontlos.com/icons/logo.png","text":"WixTools 和 Nsis 是 Tauri 提供的 Bundle (包装器), 但在国内由于一些网络问题可能会出现无法下载的情况, 有时甚至在能连接到 Gi...","permalink":"/post/2024-01-26","photos":[],"count_time":{"symbolsCount":560,"symbolsTime":"1 mins."},"categories":[{"name":"Note","slug":"Note","count":9,"path":"api/categories/Note.json"}],"tags":[{"name":"Rust","slug":"Rust","count":12,"path":"api/tags/Rust.json"},{"name":"Resolution","slug":"Resolution","count":3,"path":"api/tags/Resolution.json"},{"name":"Tauri","slug":"Tauri","count":2,"path":"api/tags/Tauri.json"}],"author":{"name":"芳塔洛斯","slug":"blog-author","avatar":"https://fontlos.com/icons/avatar.jpg","link":"/","description":"来人间一趟, 为散步一场<br />待走出岁月, 何样的彼方<br />才配得上这一路的颠沛与时光","socials":{"github":"https://github.com/fontlos","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"https://fontlos.com/icons/bilibili.svg","link":"https://space.bilibili.com/362772872"}}}},"feature":false}}